<!DOCTYPE html>
<html lang="en">
<head>
    <title>Allegheny Lease Map</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Allegheny Lease Map</title>
    <!-- Include Leaflet CSS and JavaScript -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <!-- for the underscore variable/js function-->
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/lodash.js/0.10.0/lodash.min.js"></script>
    <!-- Include jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
    <!-- Needed for the geocoder-->
    <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" />
    <script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>
    <!-- set up ajax to read geojson from url -->
    <script src="https://unpkg.com/leaflet-ajax/dist/leaflet.ajax.min.js"></script>

    <style>
        {% comment %} Create the splash screen settings {% endcomment %}
        /* Splash screen styling */
        /* Makes it full screen, the main box is below */
        #splashScreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            color: #fff;
            font-family: Arial;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease-out;
        }

        /* Main content of the splash screen */
        #textBox {
            padding: 50px;
            background-color: #eaeaea;
            opacity: 1; /* Full opacity for the box */
            color: #000;
            font-family: Arial;
            font-size: 18px;
            text-align: left;
            border-radius: 10px;
            box-shadow: 0px 0px 20px rgba(0, 0, 0, 0.3);
        }
        #centertitle {
            text-align: center;
        }
        #textleft {
            text-align: left;
        }
        /* Button on the splash screen */
        .sbtn {
            position: relative;
            left: 43%;
            bottom: 0px;
            {% comment %} margin-left: 15px;
            margin-bottom: 0px; {% endcomment %}
            {% comment %} right: 62px; {% endcomment %}
            padding: 15px 30px;
            font-size: 18px;
            background-color: #025687;
            color: white;
            font-family: Arial;
            border: none;
            cursor: pointer;
            border-radius: 5px;
            opacity: 1;

        }
        
        .sbtn:hover {
            background-color: #A3CF5F;
            color: #31322e;
        }

        /* Create the map container */
        #map { 
            height: 100%;
            width: 100%;
        }

        /* Animations */
        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 16px;
            height: 16px;
            animation: spin 2s linear infinite;
            display: inline-block;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        /* Fade-out transition for the loading container */
        .fade-out {
            opacity: 0;
            transition: opacity 3s ease-out;
        }

        #loading-container {
            transition: opacity 3s ease-out;
        }

        .checkmark {
            font-size: 30px;
            color: green;
        }

        .container {
            flex-direction: column;
            height: 98vh; /* Full height of the viewport */
            box-sizing: border-box;
        }
        .top {
            height: 3%;
            background-color: #31322e;
            color: white;
            display: flex;
            align-items: center;
        }
        .bottom {
            display: flex;
        }
        .left {
            width: 15%;
            min-width: 260px;
            height: 100%;
            color: white;
            box-sizing: border-box;
        }
        .middle {
            width: 75%;
            background-color: #FF5722;
            color: white;
            box-sizing: border-box;
        }
        .right (
            width: 20%;
            height: 100%;
            margin-right: 0;
            box-sizing: border-box;
        )

        #projectlogo { 
        }
        #logo { /* Style the logo container */
            padding-top: 3%;
            padding-bottom: 3%;
            height: 5%;
            min-heigh: 50px;
            width: 100%;
            float: left;
        }

        .leaflet-control-geocoder {
            width:100%;
            {% comment %} margin-bottom: 25px !important; {% endcomment %}
         }
        .leaflet-control-geocoder-form input{
            width: 100%;
            font-family: Arial;
            font-size: 12px;
         }

        #rightside { /* Style the sidebar */
            width: 100%; /* Take 10% of the screen width */
            padding-left: 20px;
            height: 89vh;
            background-color: #eaeaea;
            float: right; /* Float sidebar to the left */
            font-family: Arial;
            color: #31322e;
            overflow: auto;
        }
        /* Style the content inside the sidebar */
        #rightside-content {
        }

        .clear {
            display: none;
            width: 100%;
            color: white;
            background-color: #31322e;
            border: #31322e;
        }
        .clear:hover {
            color: #A3CF5F;
            cursor: pointer;
        }

        .sidebar { /* Style the sidebar */
            width: 100%; /* Take 10% of the screen width */
            height: 81vh;
            background-color: #31322e;
            float: left; /* Float sidebar to the left */
            font-family: Arial;
            color: #dadada;
            overflow: auto;
        }

        .apply-container {
            position: absolute;
            padding: 20px;
            margin-left: 8px;
            margin-bottom: 16px;
            bottom: 0;
            left: 0;
            height: 4vh;
            width: 11%;
            min-width: 50%;
            background-color: #31322e;
        }
        
        /* Style the content inside the sidebar */
        #sidebar-content {
            margin-top: -20px;
            padding: 20px;
        }

        .filter {
            margin-bottom: 10px;
        }

        .filter h4 {
            cursor: pointer;
            margin-bottom: 5px;
            color: #fff;
            position: relative;

        }

        .filter h4::after {
            content: var(--after-content, "");
            float: right;
            position: absolute;
            right: 0;
        }

        .filter.show h4::after {
            content: var(--after-content, "-");
        }

        .filter.hide h4::after {
            content: var(--after-content, "+");
        }

        .filter-content {
            display: none;
        }

        .filter-content.show {
            display: block;
            font-size: 12px;
            background-color: #3b3c38;
            overflow-y: auto;
            max-height: 200px;
        }


        /* Style smaller checkboxes */
        .filter input[type="checkbox"] {
            transform: scale(0.75);
            margin-right: 5px;
        }
        
        /* Button style */
        .filter-content button {
            margin-top:5px;
            width: 49%;
            font-size: 12px;
        }


        .r_filter {
            margin-bottom: 1px;
            text-align: left; 
            padding-left: 20px;
        }

        .r_filter h4 {
            cursor: default;
            margin-bottom: 5px;
            position: relative;
        }
        
        .r_filter h4::after {
            float: right;
            position: absolute;
            right: 0;
        }

        .r_filter h2 {
            cursor: default;
            text-align: center; 
            margin-right: 20px;
            position: relative;
        }

        .r_filter-content {
            display: show;
        }

        .r_filter_resp {
            color: #535353;
            text-align: right; 
            padding-right: 20px;
        }
        .r_filter_resp-content {
            color: blue;
        }

        .r_filter-content.show {
            display: block;
            font-size: 12px;
            background-color: #bdbdbd;
            width: 70%;
            padding: 15px;
            overflow-y: auto;
            max-height: 190px;
            margin: 15px;
        }

        .r_filter-content.show + h4::after {
            content: '-';
        }

        /* Style smaller checkboxes */
        .r_filter input[type="checkbox"] {
            transform: scale(0.75);
            margin-right: 5px;
        }
        
        /* Button style */
        .r_filter-content button {
            margin-top:5px;
            width: 49%;
            font-size: 12px;
        }

        .dropdown {
            color: #ff0101;
            position: relative;
            display: inline-block;
            width: 125px;
            margin-right: 10px;
            
        }
        .dropdown button {
            height: 3%;
            width: 150px;
            font-family: Arial;
            background-color: #31322e;
            color: white;
            border: none;
            cursor: pointer;
        }
        .dropdown button:hover {
            background-color: #31322e;
        }
        .dropdown-content {
            display: none;
            width: 200px;
            padding: 20px;
            color: black;
            font-family: Arial;
            position: absolute;
            background-color: #f9f9f9;
            min-width: 100px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
            z-index: 10000;
        }
        .dropdown:hover .dropdown-content {
            display: block;
        }
        .dropdown-content a {
            color: black;
            padding: 10px 10px;
            font-family: Arial;
            text-decoration: none;
            display: block;
        }
        .dropdown-content a:hover {
            background-color: #bcbcbc;
        }

        .dropdownright {
            color: #ff0101;
            position: absolute;
            right: 30px;
            display: inline-block;
            width: 125px;
            margin-right: 10px;
            
        }
        .dropdownright button {
            height: 3%;
            width: 150px;
            font-family: Arial;
            background-color: #31322e;
            color: white;
            border: none;
            cursor: pointer;
        }
        .dropdownright button:hover {
            background-color: #31322e;
        }
        .dropdownright-content {
            display: none;
            width: 600px;
            padding: 20px;
            color: black;
            font-family: Arial;
            position: absolute;
            right: -32px;
            background-color: #f9f9f9;
            min-width: 100px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
            z-index: 10000;
        }
        .dropdownright:hover .dropdownright-content {
            display: block;
        }
        .dropdownright-content a {
            color: black;
            padding: 10px 10px;
            font-family: Arial;
            text-decoration: none;
            display: block;
        }
        .dropdownright-content a:hover {
            background-color: #bcbcbc;
        }

        .hdropdown {
            color: #ff0101;
            position: relative;
            display: inline-block;
            width: 125px;
            margin-right: 10px;
            
        }
        .hdropdown button {
            height: 25px;
            width: 125px;
            font-family: Arial;
            background-color: #bdbdbd;
            color: black;
            border: none;
            cursor: pointer;
        }
        .hdropdown button:hover {
            background-color: #31322e;
        }
        .hdropdown-content {
            display: none;
            width: 180px;
            padding: 20px;
            color: black;
            font-family: Arial;
            position: absolute;
            background-color: #f9f9f9;
            min-width: 100px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
            z-index: 10000;
        }
        .hdropdown:hover .hdropdown-content {
            display: block;
        }
        .hdropdown-content a {
            color: black;
            padding: 10px 10px;
            font-family: Arial;
            text-decoration: none;
            display: block;
        }
        .hdropdown-content a:hover {
            background-color: #bcbcbc;
        }
        .hdropdown button::after {
            content: '';
            position: absolute;
            left: 5px;
            top: 40%;
            transform: translateY(-50%);
            border: solid black;
            border-width: 0 2px 2px 0;
            padding: 3px;
            transform: rotate(45deg);
        }
        .apply-button {
            background-color: #025687;
            color: white;
            border: none;
            border-radius: 5px; /* Rounded corners */

            padding: 10px 15px;
            cursor: pointer;
            font-size: 16px;
        }
        .reset-button {
            background-color: #31322e;
            color: white;
            border: none;
            padding: 1px 5px;
            cursor: pointer;
            font-size: 16px;
        }
        #dataContainer(
            background-color: red;
            color: yellow;
            border-radius: 10px; /* Rounded corners */
            max-width: 600px; /* Maximum width of the container */
            margin: 0 auto; /* Center the container */
            text-align: center; /* Center the text inside the container */
        )

        /* Main content styling */
        #mainContent {
            display: none; /* Hide the content initially until splash screen is removed */
        } 

        #map-legend {
            width: 151px;
            height: 297px;
            padding: 8px;
            color: black;
            text-family: arial;
            background-color: rgba(255, 255,255, 0.95); /* white with some transparency */
            box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.65); /* Drop shadow */
            position: absolute;
            bottom: 20px;
            right: 5px;
            z-index: 5000;
            border-
            radius: 5px; /* Optional, for rounded corners */
        }

        #companyblock {
            display: block;
            font-size: 12px;
            background-color: #3b3c38;
            overflow-y: auto;
            max-height: 200px;        
        }

        #companyblock.hide {
            display: none;

        }

        #companyblock.show {
            display: block;
            font-size: 12px;
            background-color: #3b3c38;
            overflow-y: auto;
            max-height: 200px;
        }

        #companyblock.show + h4::after {
            content: '-';
        }
        
        /* Button style */
        #companyblock button {
            margin-top:5px;
            width: 49%;
            font-size: 12px;
        }
        #all-consh {
            background-color: #f9f9f9;
            border-width: 0px;
            color: black;
            width:200px;
        }
        #all-consh:hover {
            color: #adadad;
        } 
        #all-uncsh {
            background-color: #f9f9f9;
            border-width: 0px;
            color: black;
            width:200px;
        }
        #all-uncsh:hover {
            color: #adadad;
        } 
        #btn-maplegendh {
            background-color: #f9f9f9;
            border-width: 0px;
            color: black;
            width:200px;
        }
        #btn-maplegendh:hover {
            color: #adadad;
        } 
        #btn-splashh {
            background-color: #f9f9f9;
            border-width: 0px;
            color: black;
            width:200px;
        }
        #btn-splashh:hover {
            color: #adadad;
        } 
        #btn-projecthomeh {
            background-color: #f9f9f9;
            border-width: 0px;
            color: black;
            width:200px;
        }
        #btn-projecthomeh:hover {
            color: #adadad;
        } 
        #all-consh {
            background-color: #f9f9f9;
            border-width: 0px;
            color: black;
            width:200px;
        }
        #all-consh:hover {
            color: #adadad;
        } 
        #all-consh {
            background-color: #f9f9f9;
            border-width: 0px;
            color: black;
            width:200px;
        }
        #all-consh:hover {
            color: #adadad;
        } 
        .allpoints-btn {
            background-color: #f9f9f9;
            border-width: 0px;
            width:151px;
        }
        .allpoints-btn:hover {
            background-color: #c7c7c7;
            color: #31322e;
        } 

        .search-content {
            width: 100%;
        }
        .search-container {
            width: 100%;
        }
    </style>
</head>
<body>
    <div class="container" id="mainContent">
        <div class="top">
            <header>
                <div class="dropdown">
                    <button>Basemaps</button>
                    <div class="dropdown-content">
                        <label><input type="radio" name="basemap" value="osm" checked>OpenStreetMap</label><br>
                        <label><input type="radio" name="basemap" value="satellite">Satellite Imagery</label><br>
                        <label><input type="radio" name="basemap" value="dark">Dark</label><br>
                        <label><input type="radio" name="basemap" value="terrain">Topo Map</label>
                    </div>
                </div>
                <div class="dropdown">
                    <button>Layers + More</button>
                    <div class="dropdown-content" id="ddbtns">
                        <label><button class="hdrop-btn" id="all-consh" onclick="toggleallcons()"><strong>Conventional Wells</button></strong></label></br>
                        <label><img src="../static/images/point_darkblue.png" alt="legend dark blue" width="15" height="15"><input type="checkbox" id="layer_cwah" checked>Active</label><br>
                        <label><img src="../static/images/point_blue.png" alt="legend blue" width="15" height="15"><input type="checkbox" id="layer_cwph" checked>Plugged</label><br>
                        <label><img src="../static/images/point_medblue.png" alt="legend med blue" width="15" height="15"><input type="checkbox" id="layer_cwoh" checked>Other</label><br>
                        <label><img src="../static/images/point_lightblue.png" alt="legend light blue" width="15" height="15"><input type="checkbox" id="layer_cwnh" checked>Never Materialized</label><br><br>
                        <label><button class="hdrop-btn" id="all-uncsh" onclick="togglealluncs()"><strong>Unconventional Wells</button></strong></label></br>
                        <label><img src="../static/images/point_darkgreen.png" alt="legend dark green" width="15" height="15"><input type="checkbox" id="layer_uwah" checked>Active</label><br>
                        <label><img src="../static/images/point_green.png" alt="legend green" width="15" height="15"><input type="checkbox" id="layer_uwph" checked>Plugged</label><br>
                        <label><img src="../static/images/point_medgreen.png" alt="legend med green" width="15" height="15"><input type="checkbox" id="layer_uwoh" checked>Other</label><br>
                        <label><img src="../static/images/point_lightgreen.png" alt="legend light blue" width="15" height="15"><input type="checkbox" id="layer_uwnh" checked>Never Materialized</label><br><br>
                        <!--<label><img src="../static/images/point_green.png" alt="legend orange" width="15" height="15"><input type="checkbox" id="layer_cwa" checked>Conventional Wells</label><br>-->
                        <!--<label><img src="../static/images/point_blue.png" alt="legend orange" width="15" height="15"><input type="checkbox" id="layer1" checked>Unconventional Wells</label><br>-->
                        <label><img src="../static/images/parcel_filtered.png" alt="legend orange" width="15" height="15"><input type="checkbox" id="layer2" unchecked>Filtered Parcels</label><br>
                        <label><img src="../static/images/parcel_orange.png" alt="legend orange" width="15" height="15"><input type="checkbox" id="layer3" checked>Oil & Gas Parcels</label><br><br>
                        <label><button class="hdrop-btn" id="btn-maplegendh" onclick="openlegend()"><strong>Map Legend</strong></button></label><br>
                        <label><button class="hdrop-btn" id="btn-splashh" onclick="opensplash()"><strong>Splash Screen</strong></button></label><br>
                        <label><button class="hdrop-btn" id="btn-projecthomeh" onclick="sendhome()"><strong>Project Home</strong></button></label><br>
                    </div>
                </div>
                <div class="dropdownright">
                    <button>Legal Disclaimer</button>
                    <div class="dropdownright-content">
                        <p>The FracTracker Alliance (“FracTracker”) has collected the information in this lease records database and produced the resulting maps for informational purposes only. FracTracker cannot provide any assurance that the information provided in this lease records database or the resulting maps is accurate, reliable, or up-to-date. In addition, the information in this lease records database and the resulting maps should not be considered an assessment of property rights nor should anyone consider the content within this database and the resulting maps as legal advice. If you have questions about property rights or the legal status of property or a person’s property rights, you should consult an attorney and/or official records. As such, FracTracker is not responsible for errors contained in the maps or lease records database, nor is FracTracker in any way responsible for the use of the information provided in this lease records database. FracTracker assumes no liability for any errors, omissions, or inaccuracies in the information provided regardless of the cause of such or for any decision made, action taken, or action not taken by the user in reliance on any maps or data provided herein. <a href="http://www.fairshake-els.org/" target="_blank" >(Source: Fair Shake Environmental Legal Services)</a><br> © Copyright 2022 FracTracker Alliance<br><a href="https://www.fractracker.org/terms-of-service/" target="_blank" >FracTracker Alliance Terms of Service</a></p>
                    </div>
                </div>
            </header>
        </div>
        <div class="bottom">
            <div class="left">
                <div class="projectlogo">
                    <img src="../static/images/fractracker-logo.png" alt="My Image" width="260" height="50">
                </div> 
                <div class="sidebar">
                    <div id="sidebar-content">
                        <div id="search-content">
                            <br>
                            <div id="search-container">
                            </div>
                        </div>
                        <br>
                        <div id="centertitle">
                            <h2>Filters</h2>
                        </div>
                        <!-- Date filter -->
                        <div class="filter toggle-date hide">
                            <h4 onclick="toggleFilter('date')">Date</h4>
                            <div class="filter-content date-content">
                                <label for="from-date">From:</label>
                                <input type="date" id="from-date"><br>
                                <label for="to-date">To:</label>
                                <input type="date" id="to-date" onchange="showdate()">
                            </div> 
                        </div>
                        <!-- Company filter -->
                        <div class="filter toggle-company show">
                            <h4 onclick="toggleFilter('company')">Company</h4>
                            <div id='companyblock' class='companyblocks show'>
                                <button onclick="checkAll('company')">Check All</button>
                                <button onclick="uncheckAll('company')">Uncheck All</button>
                                <input type="checkbox" id="company0" value="All American" checked> <label for="company0">All American</label><br>
                                <input type="checkbox" id="company1" value="Atlas" checked> <label for="company1">Atlas</label><br>
                                <input type="checkbox" id="company2" value="Baron Group" checked> <label for="company2">Baron Group</label><br>
                                <input type="checkbox" id="company3" value="Bittinger Drilling" checked> <label for="company3">Bittinger Drilling</label><br>
                                <input type="checkbox" id="company4" value="BLX" checked> <label for="company4">BLX</label><br>
                                <input type="checkbox" id="company5" value="Bow & Arrow" checked> <label for="company5">Bow & Arrow</label><br>
                                <input type="checkbox" id="company6" value="Carnegie Natural Gas" checked> <label for="company6">Carnegie Natural Gas</label><br>
                                <input type="checkbox" id="company7" value="Carter Oil & Gas" checked> <label for="company7">Carter Oil & Gas</label><br>
                                <input type="checkbox" id="company8" value="Chesapeake" checked> <label for="company8">Chesapeake</label><br>
                                <input type="checkbox" id="company9" value="CNX" checked> <label for="company9">CNX</label><br>
                                <input type="checkbox" id="company10" value="Columbia Gas" checked> <label for="company10">Columbia Gas</label><br>
                                <input type="checkbox" id="company11" value="Cone Gathering" checked> <label for="company11">Cone Gathering</label><br>
                                <input type="checkbox" id="company12" value="Consol" checked> <label for="company12">Consol</label><br>
                                <input type="checkbox" id="company13" value="Dale Property Services" checked> <label for="company13">Dale Property Services</label><br>
                                <input type="checkbox" id="company14" value="Dominion" checked> <label for="company14">Dominion</label><br>
                                <input type="checkbox" id="company15" value="Dorso" checked> <label for="company15">Dorso</label><br>
                                <input type="checkbox" id="company16" value="EQT" checked> <label for="company16">EQT</label><br>
                                <input type="checkbox" id="company17" value="Equitrans" checked> <label for="company17">Equitrans</label><br>
                                <input type="checkbox" id="company18" value="Everest Exploration" checked> <label for="company18">Everest Exploration</label><br>
                                <input type="checkbox" id="company19" value="Great Lakes Energy" checked> <label for="company19">Great Lakes Energy</label><br>
                                <input type="checkbox" id="company20" value="H&M Holdings" checked> <label for="company20">H&M Holdings</label><br>
                                <input type="checkbox" id="company21" value="Huntley & Huntley" checked> <label for="company21">Huntley & Huntley</label><br>
                                <input type="checkbox" id="company22" value="JJ Oil & Gas" checked> <label for="company22">JJ Oil & Gas</label><br>
                                <input type="checkbox" id="company23" value="Kriebel" checked> <label for="company23">Kriebel</label><br>
                                <input type="checkbox" id="company24" value="Marco Drilling" checked> <label for="company24">Marco Drilling</label><br>
                                <input type="checkbox" id="company25" value="MarkWest" checked> <label for="company25">MarkWest</label><br>
                                <input type="checkbox" id="company26" value="Natural Energy" checked> <label for="company26">Natural Energy</label><br>
                                <input type="checkbox" id="company27" value="Noble Energy" checked> <label for="company27">Noble Energy</label><br>
                                <input type="checkbox" id="company28" value="Oil & Gas Mgmt" checked> <label for="company28">Oil & Gas Mgmt</label><br>
                                <input type="checkbox" id="company29" value="Patriot Exploration" checked> <label for="company29">Patriot Exploration</label><br>
                                <input type="checkbox" id="company30" value="Penneco" checked> <label for="company30">Penneco</label><br>
                                <input type="checkbox" id="company31" value="Peoples Natural Gas" checked> <label for="company31">Peoples Natural Gas</label><br>
                                <input type="checkbox" id="company32" value="Phillips" checked> <label for="company32">Phillips</label><br>
                                <input type="checkbox" id="company33" value="Principle Energy Resources" checked> <label for="company33">Principle Energy Resources</label><br>
                                <input type="checkbox" id="company34" value="Range Resources" checked> <label for="company34">Range Resources</label><br>
                                <input type="checkbox" id="company35" value="Rice Drilling" checked> <label for="company35">Rice Drilling</label><br>
                                <input type="checkbox" id="company36" value="Shell" checked> <label for="company36">Shell</label><br>
                                <input type="checkbox" id="company37" value="Statoil USA" checked> <label for="company37">Statoil USA</label><br>
                                <input type="checkbox" id="company38" value="Sunoco" checked> <label for="company38">Sunoco</label><br>
                                <input type="checkbox" id="company39" value="Sylvan Energy" checked> <label for="company39">Sylvan Energy</label><br>
                                <input type="checkbox" id="company40" value="Turm Oil" checked> <label for="company40">Turm Oil</label><br>
                                <input type="checkbox" id="company41" value="Wadwell Group" checked> <label for="company41">Wadwell Group</label><br>
                                <input type="checkbox" id="company42" value="XTO Energy" checked> <label for="company42">XTO Energy</label><br>                                
                            </div>
                        </div>
                        <!-- Record type filter -->
                        <div class="filter toggle-recordtype hide">
                            <h4 onclick="toggleFilter('recordtype')">Record Type</h4>
                            <div class="filter-content recordtype-content">
                                <button onclick="checkAll('recordtype')">Check All</button>
                                <button onclick="uncheckAll('recordtype')">Uncheck All</button>
                                <input type="checkbox" id="agmt0" value="ADDENDUM OIL & GAS" checked> <label for="agmt0">ADDENDUM OIL & GAS</label><br>
                                <input type="checkbox" id="agmt1" value="ADDENDUM RIGHT OF WAY" checked> <label for="agmt1">ADDENDUM RIGHT OF WAY</label><br>
                                <input type="checkbox" id="agmt2" value="AFFIDAVIT" checked> <label for="agmt2">AFFIDAVIT</label><br>
                                <input type="checkbox" id="agmt3" value="AGREEMENT" checked> <label for="agmt3">AGREEMENT</label><br>
                                <input type="checkbox" id="agmt4" value="AM RATIFICATION" checked> <label for="agmt4">AM RATIFICATION</label><br>
                                <input type="checkbox" id="agmt5" value="AMEND ASGMT OIL & GAS" checked> <label for="agmt5">AMEND ASGMT OIL & GAS</label><br>
                                <input type="checkbox" id="agmt6" value="AMEND DECLARATION" checked> <label for="agmt6">AMEND DECLARATION</label><br>
                                <input type="checkbox" id="agmt7" value="AMEND LEASE" checked> <label for="agmt7">AMEND LEASE</label><br>
                                <input type="checkbox" id="agmt8" value="AMEND O & G" checked> <label for="agmt8">AMEND O & G</label><br>
                                <input type="checkbox" id="agmt9" value="AMEND R OF W" checked> <label for="agmt9">AMEND R OF W</label><br>
                                <input type="checkbox" id="agmt10" value="AMEND RIGHT OF WAY" checked> <label for="agmt10">AMEND RIGHT OF WAY</label><br>
                                <input type="checkbox" id="agmt11" value="AMENDMENT AGREEMENT" checked> <label for="agmt11">AMENDMENT AGREEMENT</label><br>
                                <input type="checkbox" id="agmt12" value="ASGMT AGRT" checked> <label for="agmt12">ASGMT AGRT</label><br>
                                <input type="checkbox" id="agmt13" value="ASGMT BILL OF SALE" checked> <label for="agmt13">ASGMT BILL OF SALE</label><br>
                                <input type="checkbox" id="agmt14" value="ASGMT INTEREST" checked> <label for="agmt14">ASGMT INTEREST</label><br>
                                <input type="checkbox" id="agmt15" value="ASGMT LEASE" checked> <label for="agmt15">ASGMT LEASE</label><br>
                                <input type="checkbox" id="agmt16" value="ASGMT LEASES RENTS" checked> <label for="agmt16">ASGMT LEASES RENTS</label><br>
                                <input type="checkbox" id="agmt17" value="ASGMT O & G" checked> <label for="agmt17">ASGMT O & G</label><br>
                                <input type="checkbox" id="agmt18" value="ASGMT RIGHT OF WAY" checked> <label for="agmt18">ASGMT RIGHT OF WAY</label><br>
                                <input type="checkbox" id="agmt19" value="ASGMT ROYALTY INTEREST" checked> <label for="agmt19">ASGMT ROYALTY INTEREST</label><br>
                                <input type="checkbox" id="agmt20" value="ASGMT SALE AGRT" checked> <label for="agmt20">ASGMT SALE AGRT</label><br>
                                <input type="checkbox" id="agmt21" value="BILL OF SALE" checked> <label for="agmt21">BILL OF SALE</label><br>
                                <input type="checkbox" id="agmt22" value="CONSENT TO LEASE" checked> <label for="agmt22">CONSENT TO LEASE</label><br>
                                <input type="checkbox" id="agmt23" value="DECL COVT & C" checked> <label for="agmt23">DECL COVT & C</label><br>
                                <input type="checkbox" id="agmt24" value="DECL COVT COND REST" checked> <label for="agmt24">DECL COVT COND REST</label><br>
                                <input type="checkbox" id="agmt25" value="DECL TAK" checked> <label for="agmt25">DECL TAK</label><br>
                                <input type="checkbox" id="agmt26" value="DECLARATION" checked> <label for="agmt26">DECLARATION</label><br>
                                <input type="checkbox" id="agmt27" value="DEED" checked> <label for="agmt27">DEED</label><br>
                                <input type="checkbox" id="agmt28" value="DESIGNATION" checked> <label for="agmt28">DESIGNATION</label><br>
                                <input type="checkbox" id="agmt29" value="EASEMENT" checked> <label for="agmt29">EASEMENT</label><br>
                                <input type="checkbox" id="agmt30" value="error in recording" checked> <label for="agmt30">error in recording</label><br>
                                <input type="checkbox" id="agmt31" value="LEASE" checked> <label for="agmt31">LEASE</label><br>
                                <input type="checkbox" id="agmt32" value="LEASE EXT AGRT" checked> <label for="agmt32">LEASE EXT AGRT</label><br>
                                <input type="checkbox" id="agmt33" value="LICENSE" checked> <label for="agmt33">LICENSE</label><br>
                                <input type="checkbox" id="agmt34" value="MEMORANDUM" checked> <label for="agmt34">MEMORANDUM</label><br>
                                <input type="checkbox" id="agmt35" value="MODIFICATION OF OIL & GAS" checked> <label for="agmt35">MODIFICATION OF OIL & GAS</label><br>
                                <input type="checkbox" id="agmt36" value="NOTICE CONDMN" checked> <label for="agmt36">NOTICE CONDMN</label><br>
                                <input type="checkbox" id="agmt37" value="NOTICE EXTENSION LEASE" checked> <label for="agmt37">NOTICE EXTENSION LEASE</label><br>
                                <input type="checkbox" id="agmt38" value="NOTICE OF INTEREST" checked> <label for="agmt38">NOTICE OF INTEREST</label><br>
                                <input type="checkbox" id="agmt39" value="O & G" checked> <label for="agmt39">O & G</label><br>
                                <input type="checkbox" id="agmt40" value="O OF C" checked> <label for="agmt40">O OF C</label><br>
                                <input type="checkbox" id="agmt41" value="PARTIAL ASGMT OIL & GAS" checked> <label for="agmt41">PARTIAL ASGMT OIL & GAS</label><br>
                                <input type="checkbox" id="agmt42" value="PARTIAL ASSIGNMENT WELLS" checked> <label for="agmt42">PARTIAL ASSIGNMENT WELLS</label><br>
                                <input type="checkbox" id="agmt43" value="PARTIAL DEED RELEASE" checked> <label for="agmt43">PARTIAL DEED RELEASE</label><br>
                                <input type="checkbox" id="agmt44" value="PERMIT" checked> <label for="agmt44">PERMIT</label><br>
                                <input type="checkbox" id="agmt45" value="R OF W" checked> <label for="agmt45">R OF W</label><br>
                                <input type="checkbox" id="agmt46" value="RATIFICATION" checked> <label for="agmt46">RATIFICATION</label><br>
                                <input type="checkbox" id="agmt47" value="RATIFY O & G" checked> <label for="agmt47">RATIFY O & G</label><br>
                                <input type="checkbox" id="agmt48" value="REGULATE GRANT" checked> <label for="agmt48">REGULATE GRANT</label><br>
                                <input type="checkbox" id="agmt49" value="REL O & G" checked> <label for="agmt49">REL O & G</label><br>
                                <input type="checkbox" id="agmt50" value="REL RIGHTS" checked> <label for="agmt50">REL RIGHTS</label><br>
                                <input type="checkbox" id="agmt51" value="RELEASE" checked> <label for="agmt51">RELEASE</label><br>
                                <input type="checkbox" id="agmt52" value="RELEASE LEASE" checked> <label for="agmt52">RELEASE LEASE</label><br>
                                <input type="checkbox" id="agmt53" value="RELEASE OIL & GAS LEASE" checked> <label for="agmt53">RELEASE OIL & GAS LEASE</label><br>
                                <input type="checkbox" id="agmt54" value="RELEASE R OF W" checked> <label for="agmt54">RELEASE R OF W</label><br>
                                <input type="checkbox" id="agmt55" value="SHERIFF DEED" checked> <label for="agmt55">SHERIFF DEED</label><br>
                                <input type="checkbox" id="agmt56" value="SUB OIL & GAS" checked> <label for="agmt56">SUB OIL & GAS</label><br>
                                <input type="checkbox" id="agmt57" value="SURR O & G" checked> <label for="agmt57">SURR O & G</label><br>
                                <input type="checkbox" id="agmt58" value="SURRENDER LEASE" checked> <label for="agmt58">SURRENDER LEASE</label><br>
                                <input type="checkbox" id="agmt59" value="TERM LEASE" checked> <label for="agmt59">TERM LEASE</label><br>
                                <input type="checkbox" id="agmt60" value="TERM O & G" checked> <label for="agmt60">TERM O & G</label><br>
                                <input type="checkbox" id="agmt61" value="TERM RIGHT OF WAY" checked> <label for="agmt61">TERM RIGHT OF WAY</label><br>
                                <input type="checkbox" id="agmt62" value="UNIT OPERATION" checked> <label for="agmt62">UNIT OPERATION</label><br>                                
                            </div>
                        </div>
                        <!-- Municipality filter -->
                        <div class="filter toggle-municipality hide">
                            <h4 onclick="toggleFilter('municipality')">Municipality</h4>
                            <div class="filter-content municipality-content">
                                <button onclick="checkAll('municipality')">Check All</button>
                                <button onclick="uncheckAll('municipality')">Uncheck All</button><br>
                                <input type="checkbox" id="muni0" value="10th Ward -  McKEESPORT" checked> <label for="muni0">10th Ward -  McKEESPORT</label><br>
                                <input type="checkbox" id="muni1" value="10th Ward - PITTSBURGH" checked> <label for="muni1">10th Ward - PITTSBURGH</label><br>
                                <input type="checkbox" id="muni2" value="11th Ward - PITTSBURGH" checked> <label for="muni2">11th Ward - PITTSBURGH</label><br>
                                <input type="checkbox" id="muni3" value="11th Ward  - McKEESPORT" checked> <label for="muni3">11th Ward  - McKEESPORT</label><br>
                                <input type="checkbox" id="muni4" value="12th Ward - PITTSBURGH" checked> <label for="muni4">12th Ward - PITTSBURGH</label><br>
                                <input type="checkbox" id="muni5" value="12th Ward  - McKEESPORT" checked> <label for="muni5">12th Ward  - McKEESPORT</label><br>
                                <input type="checkbox" id="muni6" value="13th Ward - PITTSBURGH" checked> <label for="muni6">13th Ward - PITTSBURGH</label><br>
                                <input type="checkbox" id="muni7" value="14th Ward - PITTSBURGH" checked> <label for="muni7">14th Ward - PITTSBURGH</label><br>
                                <input type="checkbox" id="muni8" value="15th Ward - PITTSBURGH" checked> <label for="muni8">15th Ward - PITTSBURGH</label><br>
                                <input type="checkbox" id="muni9" value="16th Ward - PITTSBURGH" checked> <label for="muni9">16th Ward - PITTSBURGH</label><br>
                                <input type="checkbox" id="muni10" value="17th Ward - PITTSBURGH" checked> <label for="muni10">17th Ward - PITTSBURGH</label><br>
                                <input type="checkbox" id="muni11" value="18th Ward - PITTSBURGH" checked> <label for="muni11">18th Ward - PITTSBURGH</label><br>
                                <input type="checkbox" id="muni12" value="19th Ward - PITTSBURGH" checked> <label for="muni12">19th Ward - PITTSBURGH</label><br>
                                <input type="checkbox" id="muni13" value="1st Ward - CLAIRTON" checked> <label for="muni13">1st Ward - CLAIRTON</label><br>
                                <input type="checkbox" id="muni14" value="20th Ward - PITTSBURGH" checked> <label for="muni14">20th Ward - PITTSBURGH</label><br>
                                <input type="checkbox" id="muni15" value="21st Ward - PITTSBURGH" checked> <label for="muni15">21st Ward - PITTSBURGH</label><br>
                                <input type="checkbox" id="muni16" value="22nd Ward - PITTSBURGH" checked> <label for="muni16">22nd Ward - PITTSBURGH</label><br>
                                <input type="checkbox" id="muni17" value="23rd Ward - PITTSBURGH" checked> <label for="muni17">23rd Ward - PITTSBURGH</label><br>
                                <input type="checkbox" id="muni18" value="24th Ward - PITTSBURGH" checked> <label for="muni18">24th Ward - PITTSBURGH</label><br>
                                <input type="checkbox" id="muni19" value="25th Ward - PITTSBURGH" checked> <label for="muni19">25th Ward - PITTSBURGH</label><br>
                                <input type="checkbox" id="muni20" value="27th Ward - PITTSBURGH" checked> <label for="muni20">27th Ward - PITTSBURGH</label><br>
                                <input type="checkbox" id="muni21" value="28th Ward - PITTSBURGH" checked> <label for="muni21">28th Ward - PITTSBURGH</label><br>
                                <input type="checkbox" id="muni22" value="29th Ward - PITTSBURGH" checked> <label for="muni22">29th Ward - PITTSBURGH</label><br>
                                <input type="checkbox" id="muni23" value="2nd Ward - CLAIRTON" checked> <label for="muni23">2nd Ward - CLAIRTON</label><br>
                                <input type="checkbox" id="muni24" value="2nd Ward - PITTSBURGH" checked> <label for="muni24">2nd Ward - PITTSBURGH</label><br>
                                <input type="checkbox" id="muni25" value="2nd Ward  - DUQUESNE" checked> <label for="muni25">2nd Ward  - DUQUESNE</label><br>
                                <input type="checkbox" id="muni26" value="31st Ward - PITTSBURGH" checked> <label for="muni26">31st Ward - PITTSBURGH</label><br>
                                <input type="checkbox" id="muni27" value="32nd Ward - PITTSBURGH" checked> <label for="muni27">32nd Ward - PITTSBURGH</label><br>
                                <input type="checkbox" id="muni28" value="3rd Ward  - DUQUESNE" checked> <label for="muni28">3rd Ward  - DUQUESNE</label><br>
                                <input type="checkbox" id="muni29" value="4th Ward - McKEESPORT " checked> <label for="muni29">4th Ward - McKEESPORT </label><br>
                                <input type="checkbox" id="muni30" value="4th Ward - PITTSBURGH" checked> <label for="muni30">4th Ward - PITTSBURGH</label><br>
                                <input type="checkbox" id="muni31" value="5th Ward - PITTSBURGH" checked> <label for="muni31">5th Ward - PITTSBURGH</label><br>
                                <input type="checkbox" id="muni32" value="6th Ward - PITTSBURGH" checked> <label for="muni32">6th Ward - PITTSBURGH</label><br>
                                <input type="checkbox" id="muni33" value="6th Ward  - McKEESPORT" checked> <label for="muni33">6th Ward  - McKEESPORT</label><br>
                                <input type="checkbox" id="muni34" value="7th Ward - PITTSBURGH" checked> <label for="muni34">7th Ward - PITTSBURGH</label><br>
                                <input type="checkbox" id="muni35" value="7th Ward  - McKEESPORT" checked> <label for="muni35">7th Ward  - McKEESPORT</label><br>
                                <input type="checkbox" id="muni36" value="8th Ward - PITTSBURGH" checked> <label for="muni36">8th Ward - PITTSBURGH</label><br>
                                <input type="checkbox" id="muni37" value="8th Ward  - McKEESPORT" checked> <label for="muni37">8th Ward  - McKEESPORT</label><br>
                                <input type="checkbox" id="muni38" value="9th Ward - PITTSBURGH" checked> <label for="muni38">9th Ward - PITTSBURGH</label><br>
                                <input type="checkbox" id="muni39" value="9th Ward  -  McKEESPORT" checked> <label for="muni39">9th Ward  -  McKEESPORT</label><br>
                                <input type="checkbox" id="muni40" value="Aleppo  " checked> <label for="muni40">Aleppo  </label><br>
                                <input type="checkbox" id="muni41" value="Aspinwall  " checked> <label for="muni41">Aspinwall  </label><br>
                                <input type="checkbox" id="muni42" value="Avalon  " checked> <label for="muni42">Avalon  </label><br>
                                <input type="checkbox" id="muni43" value="Baldwin Boro  " checked> <label for="muni43">Baldwin Boro  </label><br>
                                <input type="checkbox" id="muni44" value="Bell Acres  " checked> <label for="muni44">Bell Acres  </label><br>
                                <input type="checkbox" id="muni45" value="Bellevue  " checked> <label for="muni45">Bellevue  </label><br>
                                <input type="checkbox" id="muni46" value="Ben Avon  " checked> <label for="muni46">Ben Avon  </label><br>
                                <input type="checkbox" id="muni47" value="Bethel Park  " checked> <label for="muni47">Bethel Park  </label><br>
                                <input type="checkbox" id="muni48" value="Blawnox  " checked> <label for="muni48">Blawnox  </label><br>
                                <input type="checkbox" id="muni49" value="Brackenridge  " checked> <label for="muni49">Brackenridge  </label><br>
                                <input type="checkbox" id="muni50" value="Braddock  " checked> <label for="muni50">Braddock  </label><br>
                                <input type="checkbox" id="muni51" value="Braddock Hills  " checked> <label for="muni51">Braddock Hills  </label><br>
                                <input type="checkbox" id="muni52" value="Brentwood" checked> <label for="muni52">Brentwood</label><br>
                                <input type="checkbox" id="muni53" value="Carnegie  " checked> <label for="muni53">Carnegie  </label><br>
                                <input type="checkbox" id="muni54" value="Castle Shannon  " checked> <label for="muni54">Castle Shannon  </label><br>
                                <input type="checkbox" id="muni55" value="Cheswick  " checked> <label for="muni55">Cheswick  </label><br>
                                <input type="checkbox" id="muni56" value="Churchill  " checked> <label for="muni56">Churchill  </label><br>
                                <input type="checkbox" id="muni57" value="Collier  " checked> <label for="muni57">Collier  </label><br>
                                <input type="checkbox" id="muni58" value="Coraopolis  " checked> <label for="muni58">Coraopolis  </label><br>
                                <input type="checkbox" id="muni59" value="Crafton  " checked> <label for="muni59">Crafton  </label><br>
                                <input type="checkbox" id="muni60" value="Crescent  " checked> <label for="muni60">Crescent  </label><br>
                                <input type="checkbox" id="muni61" value="Dravosburg  " checked> <label for="muni61">Dravosburg  </label><br>
                                <input type="checkbox" id="muni62" value="East Deer  " checked> <label for="muni62">East Deer  </label><br>
                                <input type="checkbox" id="muni63" value="East McKeesport  " checked> <label for="muni63">East McKeesport  </label><br>
                                <input type="checkbox" id="muni64" value="East Pittsburgh  " checked> <label for="muni64">East Pittsburgh  </label><br>
                                <input type="checkbox" id="muni65" value="Edgewood  " checked> <label for="muni65">Edgewood  </label><br>
                                <input type="checkbox" id="muni66" value="Edgeworth  " checked> <label for="muni66">Edgeworth  </label><br>
                                <input type="checkbox" id="muni67" value="Elizabeth Boro  " checked> <label for="muni67">Elizabeth Boro  </label><br>
                                <input type="checkbox" id="muni68" value="Elizabeth Twp  " checked> <label for="muni68">Elizabeth Twp  </label><br>
                                <input type="checkbox" id="muni69" value="Emsworth  " checked> <label for="muni69">Emsworth  </label><br>
                                <input type="checkbox" id="muni70" value="Etna  " checked> <label for="muni70">Etna  </label><br>
                                <input type="checkbox" id="muni71" value="Fawn  " checked> <label for="muni71">Fawn  </label><br>
                                <input type="checkbox" id="muni72" value="Findlay  " checked> <label for="muni72">Findlay  </label><br>
                                <input type="checkbox" id="muni73" value="Forest Hills  " checked> <label for="muni73">Forest Hills  </label><br>
                                <input type="checkbox" id="muni74" value="Forward  " checked> <label for="muni74">Forward  </label><br>
                                <input type="checkbox" id="muni75" value="Fox Chapel  " checked> <label for="muni75">Fox Chapel  </label><br>
                                <input type="checkbox" id="muni76" value="Franklin Park " checked> <label for="muni76">Franklin Park </label><br>
                                <input type="checkbox" id="muni77" value="Frazer  " checked> <label for="muni77">Frazer  </label><br>
                                <input type="checkbox" id="muni78" value="Glassport  " checked> <label for="muni78">Glassport  </label><br>
                                <input type="checkbox" id="muni79" value="Glen Osborne" checked> <label for="muni79">Glen Osborne</label><br>
                                <input type="checkbox" id="muni80" value="Glenfield  " checked> <label for="muni80">Glenfield  </label><br>
                                <input type="checkbox" id="muni81" value="Greentree  " checked> <label for="muni81">Greentree  </label><br>
                                <input type="checkbox" id="muni82" value="Hampton  " checked> <label for="muni82">Hampton  </label><br>
                                <input type="checkbox" id="muni83" value="Harmar  " checked> <label for="muni83">Harmar  </label><br>
                                <input type="checkbox" id="muni84" value="Harrison  " checked> <label for="muni84">Harrison  </label><br>
                                <input type="checkbox" id="muni85" value="Haysville  " checked> <label for="muni85">Haysville  </label><br>
                                <input type="checkbox" id="muni86" value="Heidelberg  " checked> <label for="muni86">Heidelberg  </label><br>
                                <input type="checkbox" id="muni87" value="Homestead  " checked> <label for="muni87">Homestead  </label><br>
                                <input type="checkbox" id="muni88" value="Indiana  " checked> <label for="muni88">Indiana  </label><br>
                                <input type="checkbox" id="muni89" value="Ingram  " checked> <label for="muni89">Ingram  </label><br>
                                <input type="checkbox" id="muni90" value="Jefferson Hills" checked> <label for="muni90">Jefferson Hills</label><br>
                                <input type="checkbox" id="muni91" value="Kennedy  " checked> <label for="muni91">Kennedy  </label><br>
                                <input type="checkbox" id="muni92" value="Kilbuck  " checked> <label for="muni92">Kilbuck  </label><br>
                                <input type="checkbox" id="muni93" value="Leetsdale  " checked> <label for="muni93">Leetsdale  </label><br>
                                <input type="checkbox" id="muni94" value="Liberty  " checked> <label for="muni94">Liberty  </label><br>
                                <input type="checkbox" id="muni95" value="Lincoln  " checked> <label for="muni95">Lincoln  </label><br>
                                <input type="checkbox" id="muni96" value="Marshall  " checked> <label for="muni96">Marshall  </label><br>
                                <input type="checkbox" id="muni97" value="McCandless  " checked> <label for="muni97">McCandless  </label><br>
                                <input type="checkbox" id="muni98" value="McDonald  " checked> <label for="muni98">McDonald  </label><br>
                                <input type="checkbox" id="muni99" value="McKees Rocks  " checked> <label for="muni99">McKees Rocks  </label><br>
                                <input type="checkbox" id="muni100" value="Millvale  " checked> <label for="muni100">Millvale  </label><br>
                                <input type="checkbox" id="muni101" value="Monroeville  " checked> <label for="muni101">Monroeville  </label><br>
                                <input type="checkbox" id="muni102" value="Moon  " checked> <label for="muni102">Moon  </label><br>
                                <input type="checkbox" id="muni103" value="Mt. Oliver  " checked> <label for="muni103">Mt. Oliver  </label><br>
                                <input type="checkbox" id="muni104" value="Mt.Lebanon  " checked> <label for="muni104">Mt.Lebanon  </label><br>
                                <input type="checkbox" id="muni105" value="Munhall  " checked> <label for="muni105">Munhall  </label><br>
                                <input type="checkbox" id="muni106" value="Neville  " checked> <label for="muni106">Neville  </label><br>
                                <input type="checkbox" id="muni107" value="North Braddock  " checked> <label for="muni107">North Braddock  </label><br>
                                <input type="checkbox" id="muni108" value="North Fayette  " checked> <label for="muni108">North Fayette  </label><br>
                                <input type="checkbox" id="muni109" value="North Versailles  " checked> <label for="muni109">North Versailles  </label><br>
                                <input type="checkbox" id="muni110" value="O''Hara  " checked> <label for="muni110">O''Hara  </label><br>
                                <input type="checkbox" id="muni111" value="Oakdale  " checked> <label for="muni111">Oakdale  </label><br>
                                <input type="checkbox" id="muni112" value="Oakmont  " checked> <label for="muni112">Oakmont  </label><br>
                                <input type="checkbox" id="muni113" value="Ohio  " checked> <label for="muni113">Ohio  </label><br>
                                <input type="checkbox" id="muni114" value="Penn Hills  " checked> <label for="muni114">Penn Hills  </label><br>
                                <input type="checkbox" id="muni115" value="Pine  " checked> <label for="muni115">Pine  </label><br>
                                <input type="checkbox" id="muni116" value="Pitcairn  " checked> <label for="muni116">Pitcairn  </label><br>
                                <input type="checkbox" id="muni117" value="Pleasant Hills  " checked> <label for="muni117">Pleasant Hills  </label><br>
                                <input type="checkbox" id="muni118" value="Plum  " checked> <label for="muni118">Plum  </label><br>
                                <input type="checkbox" id="muni119" value="Port Vue  " checked> <label for="muni119">Port Vue  </label><br>
                                <input type="checkbox" id="muni120" value="Rankin  " checked> <label for="muni120">Rankin  </label><br>
                                <input type="checkbox" id="muni121" value="Reserve  " checked> <label for="muni121">Reserve  </label><br>
                                <input type="checkbox" id="muni122" value="Richland  " checked> <label for="muni122">Richland  </label><br>
                                <input type="checkbox" id="muni123" value="Robinson  " checked> <label for="muni123">Robinson  </label><br>
                                <input type="checkbox" id="muni124" value="Ross  " checked> <label for="muni124">Ross  </label><br>
                                <input type="checkbox" id="muni125" value="Rosslyn Farms  " checked> <label for="muni125">Rosslyn Farms  </label><br>
                                <input type="checkbox" id="muni126" value="Scott  " checked> <label for="muni126">Scott  </label><br>
                                <input type="checkbox" id="muni127" value="Sewickley  " checked> <label for="muni127">Sewickley  </label><br>
                                <input type="checkbox" id="muni128" value="Sewickley Heights  " checked> <label for="muni128">Sewickley Heights  </label><br>
                                <input type="checkbox" id="muni129" value="Shaler  " checked> <label for="muni129">Shaler  </label><br>
                                <input type="checkbox" id="muni130" value="Sharpsburg  " checked> <label for="muni130">Sharpsburg  </label><br>
                                <input type="checkbox" id="muni131" value="South Fayette  " checked> <label for="muni131">South Fayette  </label><br>
                                <input type="checkbox" id="muni132" value="South Park  " checked> <label for="muni132">South Park  </label><br>
                                <input type="checkbox" id="muni133" value="South Versailles  " checked> <label for="muni133">South Versailles  </label><br>
                                <input type="checkbox" id="muni134" value="Springdale Boro  " checked> <label for="muni134">Springdale Boro  </label><br>
                                <input type="checkbox" id="muni135" value="Springdale Twp  " checked> <label for="muni135">Springdale Twp  </label><br>
                                <input type="checkbox" id="muni136" value="Stowe  " checked> <label for="muni136">Stowe  </label><br>
                                <input type="checkbox" id="muni137" value="Swissvale  " checked> <label for="muni137">Swissvale  </label><br>
                                <input type="checkbox" id="muni138" value="Tarentum  " checked> <label for="muni138">Tarentum  </label><br>
                                <input type="checkbox" id="muni139" value="Thornburg  " checked> <label for="muni139">Thornburg  </label><br>
                                <input type="checkbox" id="muni140" value="Trafford  " checked> <label for="muni140">Trafford  </label><br>
                                <input type="checkbox" id="muni141" value="Turtle Creek  " checked> <label for="muni141">Turtle Creek  </label><br>
                                <input type="checkbox" id="muni142" value="Upper St. Clair  " checked> <label for="muni142">Upper St. Clair  </label><br>
                                <input type="checkbox" id="muni143" value="Versailles  " checked> <label for="muni143">Versailles  </label><br>
                                <input type="checkbox" id="muni144" value="Wall  " checked> <label for="muni144">Wall  </label><br>
                                <input type="checkbox" id="muni145" value="West Deer  " checked> <label for="muni145">West Deer  </label><br>
                                <input type="checkbox" id="muni146" value="West Elizabeth  " checked> <label for="muni146">West Elizabeth  </label><br>
                                <input type="checkbox" id="muni147" value="West Homestead  " checked> <label for="muni147">West Homestead  </label><br>
                                <input type="checkbox" id="muni148" value="West Mifflin  " checked> <label for="muni148">West Mifflin  </label><br>
                                <input type="checkbox" id="muni149" value="Whitaker  " checked> <label for="muni149">Whitaker  </label><br>
                                <input type="checkbox" id="muni150" value="White Oak  " checked> <label for="muni150">White Oak  </label><br>
                                <input type="checkbox" id="muni151" value="Whitehall  " checked> <label for="muni151">Whitehall  </label><br>
                                <input type="checkbox" id="muni152" value="Wilkins " checked> <label for="muni152">Wilkins </label><br>
                                <input type="checkbox" id="muni153" value="Wilkinsburg  " checked> <label for="muni153">Wilkinsburg  </label><br>
                                <input type="checkbox" id="muni154" value="Wilmerding  " checked> <label for="muni154">Wilmerding  </label><br>
                            </div>
                        </div>
                        <!-- School district filter -->
                        <div class="filter toggle-schooldistrict hide">
                            <h4 onclick="toggleFilter('schooldistrict')">School District</h4>
                            <div class="filter-content schooldistrict-content">
                                <button onclick="checkAll('schooldistrict')">Check All</button>
                                <button onclick="uncheckAll('schooldistrict')">Uncheck All</button><br>
                                <input type="checkbox" id="schooldistrict0" value="Allegheny Valley" checked> <label for="schooldistrict0">Allegheny Valley</label><br>
                                <input type="checkbox" id="schooldistrict1" value="Avonworth" checked> <label for="schooldistrict1">Avonworth</label><br>
                                <input type="checkbox" id="schooldistrict2" value="Baldwin Whitehall" checked> <label for="schooldistrict2">Baldwin Whitehall</label><br>
                                <input type="checkbox" id="schooldistrict3" value="Bethel Park" checked> <label for="schooldistrict3">Bethel Park</label><br>
                                <input type="checkbox" id="schooldistrict4" value="Brentwood Boro" checked> <label for="schooldistrict4">Brentwood Boro</label><br>
                                <input type="checkbox" id="schooldistrict5" value="Carlynton" checked> <label for="schooldistrict5">Carlynton</label><br>
                                <input type="checkbox" id="schooldistrict6" value="Chartiers Valley" checked> <label for="schooldistrict6">Chartiers Valley</label><br>
                                <input type="checkbox" id="schooldistrict7" value="Clairton City" checked> <label for="schooldistrict7">Clairton City</label><br>
                                <input type="checkbox" id="schooldistrict8" value="Cornell" checked> <label for="schooldistrict8">Cornell</label><br>
                                <input type="checkbox" id="schooldistrict9" value="Deer Lakes" checked> <label for="schooldistrict9">Deer Lakes</label><br>
                                <input type="checkbox" id="schooldistrict10" value="Duquesne City" checked> <label for="schooldistrict10">Duquesne City</label><br>
                                <input type="checkbox" id="schooldistrict11" value="East Allegheny" checked> <label for="schooldistrict11">East Allegheny</label><br>
                                <input type="checkbox" id="schooldistrict12" value="Elizabeth Forward" checked> <label for="schooldistrict12">Elizabeth Forward</label><br>
                                <input type="checkbox" id="schooldistrict13" value="Fort Cherry" checked> <label for="schooldistrict13">Fort Cherry</label><br>
                                <input type="checkbox" id="schooldistrict14" value="Fox Chapel Area" checked> <label for="schooldistrict14">Fox Chapel Area</label><br>
                                <input type="checkbox" id="schooldistrict15" value="Gateway" checked> <label for="schooldistrict15">Gateway</label><br>
                                <input type="checkbox" id="schooldistrict16" value="Hampton Township" checked> <label for="schooldistrict16">Hampton Township</label><br>
                                <input type="checkbox" id="schooldistrict17" value="Highlands" checked> <label for="schooldistrict17">Highlands</label><br>
                                <input type="checkbox" id="schooldistrict18" value="Keystone Oaks" checked> <label for="schooldistrict18">Keystone Oaks</label><br>
                                <input type="checkbox" id="schooldistrict19" value="McKeesport Area" checked> <label for="schooldistrict19">McKeesport Area</label><br>
                                <input type="checkbox" id="schooldistrict20" value="Montour" checked> <label for="schooldistrict20">Montour</label><br>
                                <input type="checkbox" id="schooldistrict21" value="Moon Area" checked> <label for="schooldistrict21">Moon Area</label><br>
                                <input type="checkbox" id="schooldistrict22" value="Mt Lebanon" checked> <label for="schooldistrict22">Mt Lebanon</label><br>
                                <input type="checkbox" id="schooldistrict23" value="North Allegheny" checked> <label for="schooldistrict23">North Allegheny</label><br>
                                <input type="checkbox" id="schooldistrict24" value="North Hills" checked> <label for="schooldistrict24">North Hills</label><br>
                                <input type="checkbox" id="schooldistrict25" value="Northgate" checked> <label for="schooldistrict25">Northgate</label><br>
                                <input type="checkbox" id="schooldistrict26" value="Norwin" checked> <label for="schooldistrict26">Norwin</label><br>
                                <input type="checkbox" id="schooldistrict27" value="Penn-Trafford" checked> <label for="schooldistrict27">Penn-Trafford</label><br>
                                <input type="checkbox" id="schooldistrict28" value="Penn Hills Twp" checked> <label for="schooldistrict28">Penn Hills Twp</label><br>
                                <input type="checkbox" id="schooldistrict29" value="Pine-Richland" checked> <label for="schooldistrict29">Pine-Richland</label><br>
                                <input type="checkbox" id="schooldistrict30" value="Pittsburgh" checked> <label for="schooldistrict30">Pittsburgh</label><br>
                                <input type="checkbox" id="schooldistrict31" value="Plum Boro" checked> <label for="schooldistrict31">Plum Boro</label><br>
                                <input type="checkbox" id="schooldistrict32" value="Quaker Valley" checked> <label for="schooldistrict32">Quaker Valley</label><br>
                                <input type="checkbox" id="schooldistrict33" value="Riverview" checked> <label for="schooldistrict33">Riverview</label><br>
                                <input type="checkbox" id="schooldistrict34" value="Shaler Area" checked> <label for="schooldistrict34">Shaler Area</label><br>
                                <input type="checkbox" id="schooldistrict35" value="South Allegheny" checked> <label for="schooldistrict35">South Allegheny</label><br>
                                <input type="checkbox" id="schooldistrict36" value="South Fayette Twp" checked> <label for="schooldistrict36">South Fayette Twp</label><br>
                                <input type="checkbox" id="schooldistrict37" value="South Park" checked> <label for="schooldistrict37">South Park</label><br>
                                <input type="checkbox" id="schooldistrict38" value="Steel Valley" checked> <label for="schooldistrict38">Steel Valley</label><br>
                                <input type="checkbox" id="schooldistrict39" value="Sto-Rox" checked> <label for="schooldistrict39">Sto-Rox</label><br>
                                <input type="checkbox" id="schooldistrict40" value="Upper St Clair" checked> <label for="schooldistrict40">Upper St Clair</label><br>
                                <input type="checkbox" id="schooldistrict41" value="West Allegheny" checked> <label for="schooldistrict41">West Allegheny</label><br>
                                <input type="checkbox" id="schooldistrict42" value="West Jefferson Hills" checked> <label for="schooldistrict42">West Jefferson Hills</label><br>
                                <input type="checkbox" id="schooldistrict43" value="West Mifflin Area" checked> <label for="schooldistrict43">West Mifflin Area</label><br>
                                <input type="checkbox" id="schooldistrict44" value="Wilkinsburg Boro" checked> <label for="schooldistrict44">Wilkinsburg Boro</label><br>
                                <input type="checkbox" id="schooldistrict45" value="Woodland Hills" checked> <label for="schooldistrict45">Woodland Hills</label><br>
                            </div>
                        </div>
                        <!-- Zoning filter -->
                        <div class="filter toggle-zoning hide">
                            <h4 onclick="toggleFilter('zoning')">Zoning</h4>
                            <div class="filter-content zoning-content">
                                <button onclick="checkAll('zoning')">Check All</button>
                                <button onclick="uncheckAll('zoning')">Uncheck All</button><br>
                                <input type='checkbox' id='zoning0' value='Agricultural' checked> <label for='zoning0'>Agricultural</label><br>
                                <input type='checkbox' id='zoning1' value='Commercial' checked> <label for='zoning1'>Commercial</label><br>
                                <input type='checkbox' id='zoning2' value='Government' checked> <label for='zoning2'>Government</label><br>
                                <input type='checkbox' id='zoning3' value='Industrial' checked> <label for='zoning3'>Industrial</label><br>
                                <input type='checkbox' id='zoning4' value='Other' checked> <label for='zoning4'>Other</label><br>
                                <input type='checkbox' id='zoning5' value='Residential' checked> <label for='zoning5'>Residential</label><br>
                                <input type='checkbox' id='zoning6' value='Utilities' checked> <label for='zoning6'>Utilities</label><br>
                            </div>
                        </div>
                        <br>
                        <div id="loading-container">
                            <strong>Loading Layers</strong>
                            <div id="con-status">
                                Conventional Wells... <span class="spinner" id="spinner_con"></span>
                                <span id='con-status-done'></span>
                            </div>
                            <div id="unc-status">
                                Unconventional Wells... <span class="spinner" id="spinner_unc"></span>
                                <span id='unc-status-done'></span>
                            </div>
                            <div id="poly-status">
                                Parcels... <span class="spinner" id="spinner_poly"></span>
                                <span id='poly-status-done'></span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="apply-container">
                        <button class="apply-button" id="applyButton" >Apply Selection</button>
                        <button class="reset-button" id="resetButton" >Reset</button>
                </div>
            </div>
            <div class="middle">
                <div id="map">
                    <div id="map-legend">
                        <label><button class="allpoints-btn" id="all-cons" onclick="toggleallcons()"><strong>Conventional Wells</strong></button></label></br>
                        <label><img src="../static/images/point_darkblue.png" alt="legend dark blue" width="15" height="15"><input type="checkbox" id="layer_cwa" checked>Active</label><br>
                        <label><img src="../static/images/point_blue.png" alt="legend blue" width="15" height="15"><input type="checkbox" id="layer_cwp" checked>Plugged</label><br>
                        <label><img src="../static/images/point_medblue.png" alt="legend med blue" width="15" height="15"><input type="checkbox" id="layer_cwo" checked>Other</label><br>
                        <label><img src="../static/images/point_lightblue.png" alt="legend light blue" width="15" height="15"><input type="checkbox" id="layer_cwn" checked>Never Materialized</label><br><br>
                        <label><button class="allpoints-btn" id="all-uncs" onclick="togglealluncs()"><strong>Unconventional Wells</strong></button></label></br>
                        <label><img src="../static/images/point_darkgreen.png" alt="legend dark green" width="15" height="15"><input type="checkbox" id="layer_uwa" checked>Active</label><br>
                        <label><img src="../static/images/point_green.png" alt="legend green" width="15" height="15"><input type="checkbox" id="layer_uwp" checked>Plugged</label><br>
                        <label><img src="../static/images/point_medgreen.png" alt="legend med green" width="15" height="15"><input type="checkbox" id="layer_uwo" checked>Other</label><br>
                        <label><img src="../static/images/point_lightgreen.png" alt="legend light blue" width="15" height="15"><input type="checkbox" id="layer_uwn" checked>Never Materialized</label><br><br>
                        <label><button class="allpoints-btn" id="all-pars"><strong>Parcel Layers</strong></button></label></br>
                        <label><img src="../static/images/parcel_filtered.png" alt="legend blue poly" width="15" height="15"><input type="checkbox" id="layer2c" >Filtered Parcels</label><br>
                        <label><img src="../static/images/parcel_orange.png" alt="legend orange poly" width="15" height="15"><input type="checkbox" id="layer3c" checked>Oil & Gas Parcels</label><br>
                    </div>
                </div>
            </div>
            <div class="deets">
                <div id="projectlogo">
                    <img src="../static/images/allegheny-lease-mapping-project_crop.png" alt="PrjLogo" width="260" height="50">
                </div> 
                <div id="rightside">
                    <div class="r_filter">
                        <h2>PARCEL DETAILS</h2>
                    </div>
                    <div>
                        <button class="clear" id="clear_sel"><strong>CLEAR SELECTION</strong></button>
                    </div>
                    <div class="r_filter">
                        <h4>Parcel ID</h4>
                    </div>
                    <div class="r_filter_resp">
                        <p id="parcelid">----------</p>
                    </div>
                    <div class="r_filter">
                        <h4>Book/Vol/Page</h4>
                    </div>
                    <div class="r_filter_resp">
                        <p id="bvp">----------</p>
                    </div>
                    <div class="r_filter">
                        <h4>Municipality</h4>
                    </div>
                    <div class="r_filter_resp">
                        <p id="muni">----------</p>
                    </div>
                    <div class="r_filter">
                        <h4>School District</h4>
                    </div>
                    <div class="r_filter_resp">
                        <p id="schdist">----------</p>
                    </div>
                    <div class="r_filter">
                        <h4>Zoning</h4>
                    </div>
                    <div class="r_filter_resp">
                        <p id="zone">----------</p>
                    </div>
                    <div class="r_filter">
                        <h4>Land Use</h4>
                    </div>
                    <div class="r_filter_resp">
                        <p id="land_use">----------</p>
                    </div>
                    <div class="r_filter">
                        <h4>Lot Acreage</h4>
                    </div>
                    <div class="r_filter_resp">
                        <p id="acreage">----------</p>
                    </div>
                    <div class="r_filter">
                        <h4>Assessed Fair Market Value</h4>
                    </div>
                    <div class="r_filter_resp">
                        <p id="market_value">----------</p>
                    </div>
                    <div class="r_filter">
                        <h4>Current Ownership</h4>
                    </div>
                    <div class="r_filter_resp">
                        <a id="ownership">----------</a>
                    </div>
                    <div class="r_filter">
                        <h4 onclick="toggleFilter('zoning1')">History</h4>
                        <div id="dataContainer">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="splashScreen">
        <div class="paddingArea">
            <div id="textBox">
                <div id="centertitle">
                    <h2></b>Welcome to the Allegheny Lease Mapping Project</b></h2>
                </div>
                <div id="textleft">
                    <p>Originally released in 2016 to explore the patterns of oil and gas agreements in Allegheny County, the<br>FracTracker Allegheny Lease Map has been updated to include parcel agreement histories as of<br>November 2023. This new dataset provides records of 269,370 agreements with oil and gas companies<br>over 33,923 parcels in Allegheny County, totalling 152,642 acres, or about 32% of the county's landmass.</p>
                    <p>For a more tailored view:</p>
                    <ul>
                        <li>Narrow down your search criteria by applying the filtering tools on the left</li>
                        <li>Take a peek underneath by changing the basemap in the top left corner</li>
                        <li>Click on a parcel for its current details and history</li>
                        <li>Click on a well to learn more about it</li>
                    </ul>
                    <p></p>
                </div>
                <div>
                    <button class="sbtn" onclick="removeSplash()">Enter</button>
                </div>
            </div>
        </div>
    </div>
    <script>
        // Construct spinners to show that the main map layers are still loading
        const spinner_con = document.getElementById('spinner_con');
        const spinner_unc = document.getElementById('spinner_unc');
        const spinner_poly = document.getElementById('spinner_poly');
        const polyText = document.getElementById('poly-status-done');
        const uncText = document.getElementById('unc-status-done');
        const conText = document.getElementById('con-status-done');
        const loadingContainer = document.getElementById('loading-container');

        const checkmarku = document.createElement('span');
        checkmarku.className = 'checkmark';
        checkmarku.innerHTML = '&#10004;';  // Checkmark symbol
        const checkmarkc = document.createElement('span');
        checkmarkc.className = 'checkmark';
        checkmarkc.innerHTML = '&#10004;';  // Checkmark symbol
        const checkmarkp = document.createElement('span');
        checkmarkp.className = 'checkmark';
        checkmarkp.innerHTML = '&#10004;';  // Checkmark symbol

        // Initialize Leaflet map
        var map = L.map('map').setView([40.4406, -79.9959], 11);
        map.setMinZoom(10);
        map.setMaxZoom(18);

        // Establish basemaps
        // Add OpenStreetMap tile layer
        L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
            //attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);
    
        // Define tile layers for the basemaps
        const osmLayer = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 18,
            attribution: '© OpenStreetMap contributors'
        }).addTo(map);

        const satelliteLayer = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
            attribution: 'Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community'
        });

        const terrainLayer = L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {
            maxZoom: 17,
            attribution: '© OpenTopoMap contributors'
        });
        const darkLayer = L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
            subdomains: 'abcd',
            maxZoom: 20
        });

        let vectorTileLayerF = L.layerGroup().addTo(map);
        let geojsonLayer = L.layerGroup().addTo(map) ;


        // Functions for the map
        // Function to switch basemaps
        function switchBasemap(e) {
            // Remove all base layers
            map.removeLayer(osmLayer);
            map.removeLayer(satelliteLayer);
            map.removeLayer(terrainLayer);
            map.removeLayer(darkLayer);

            if (e.target.value === 'osm') {
                map.addLayer(osmLayer);
            } else if (e.target.value === 'satellite') {
                map.addLayer(satelliteLayer);
            } else if (e.target.value === 'dark') {
                map.addLayer(darkLayer);
            } else {
                map.addLayer(terrainLayer);
            };
            map.removeLayer(vectorMaskLayer);
            getMask();
        }

        // Add event listener to radio buttons
        const radios = document.querySelectorAll('input[name="basemap"]');
        radios.forEach(radio => {
            radio.addEventListener('change', switchBasemap);
        });

        var geocoder = L.Control.Geocoder.nominatim();
        if (typeof URLSearchParams !== 'undefined' && location.search) {
          // parse /?geocoder=nominatim from URL
          var params = new URLSearchParams(location.search);
          var geocoderString = params.get('geocoder');
          if (geocoderString && L.Control.Geocoder[geocoderString]) {
            console.log('Using geocoder', geocoderString);
            geocoder = L.Control.Geocoder[geocoderString]();
          } else if (geocoderString) {
            console.warn('Unsupported geocoder', geocoderString);
          }
        }
  
        var control = L.Control.geocoder({
          collapsed: false,
          placeholder: 'Go to Location...',
          position:'topleft',
          geocoder: geocoder
        }).addTo(map);
  
        var dots;
  
        // Call the getContainer routine.
        var htmlObject = control.getContainer();
        // Get the desired parent node.
        var a = document.getElementById('search-container');

        // Finally append that node to the new parent, recursively searching out and re-parenting nodes.
        function setParent(el, newParent)
        {
            newParent.appendChild(el);
        }
        setParent(htmlObject, a);

        // Functions for the left side panel
        // Function to toggle filter visibility
        function toggleFilter(filterName) {
            if (filterName == 'company') {
                var filterContent = document.getElementById('companyblock');
                
            } else {
                var filterContent = document.querySelector('.' + filterName + '-content');
            }
            
            var filterIcon = document.querySelector('.filter.toggle-' + filterName + ' h4');
            if (filterContent.classList.contains('show')) {
                filterContent.classList.remove('show');
                filterContent.classList.add('hide');
                filterIcon.style.setProperty('--after-content', '"+"');
            } else {
                filterContent.classList.add('show');
                filterContent.classList.remove('hide');
                filterIcon.style.setProperty('--after-content', '"-"');
            }
        }

        // Function to check all checkboxes in a filter group
        function checkAll(filterName) {
            if (filterName == 'company') {
                var checkboxes = document.querySelectorAll('.companyblocks input[type="checkbox"]');
                
            } else {
                var checkboxes = document.querySelectorAll('.' + filterName + '-content input[type="checkbox"]');
            }
            checkboxes.forEach(function(checkbox) {
                checkbox.checked = true;
            });
        }

        // Function to uncheck all checkboxes in a filter group
        function uncheckAll(filterName) {
            if (filterName == 'company') {
                var checkboxes = document.querySelectorAll('.companyblocks input[type="checkbox"]');
                
            } else {
                var checkboxes = document.querySelectorAll('.' + filterName + '-content input[type="checkbox"]');
            }
            checkboxes.forEach(function(checkbox) {
                checkbox.checked = false;
            });
        }

        // Function to fetch GeoJSON data from a view
        function getMask() {
            $.ajax({
                url: '/leasemap/getMask', // Replace with your view URL
                method: 'GET',
                success: function(data) {
                    // Convert GeoJSON to vector tiles using leaflet-geojson-vt
                    var maskStyle = {
                        fillColor:"#000",
                        color: "#000",
                        weight: 1,
                        opacity: 0.2,
                        fillOpacity: 0.66,
                      };
                    
                    var options = {
                        maxZoom: 20,
                        tolerance: 3,
                        debug: 0,
                        style: maskStyle
                    };
                    vectorMaskLayer = L.geoJson(data, options).addTo(map);
                },
                error: function(xhr, status, error) {
                    console.error(error);
                }
            });

        }

        getMask();

        // Load the parcel geojson file via the static path
        spinner_poly.style.display = 'block';

        var parcelStyle = {
            fillColor:"#ff6802",
            color: "#fff",
            weight: 1,
            opacity: 0.1,
            fillOpacity: 0.9,
            };
        
        var options = {
            maxZoom: 20,
            tolerance: 3,
            debug: 0,
            style: parcelStyle
        };

        parcelGeojsonData = 'https://raw.githubusercontent.com/cullensmith/alleghenyleasemap/refs/heads/main/project_allegheny/static/json/og_parcels.geojson'
        vectorTileLayer = L.geoJSON.ajax(parcelGeojsonData, { 
            style: parcelStyle,
            onEachFeature: function (feature, layer) {
                
                layer.on('click', function() {
                    showSelection(feature);
                    getMatches(feature.properties.pin);
                    });
            }
        }).addTo(map);

        // Add fade-out class to the container
        spinner_poly.style.display = 'none';
        polyText.innerHTML = '';
        polyText.appendChild(checkmarkp);
        loadingContainer.classList.add('fade-out');

        // Custom marker icon
        function createCircleMarker(latlng) {
            return L.circleMarker(latlng, {
                radius: 3.5, // Adjust size as needed
                fillColor: "#000000", // Blue color
                color: "#fff", // White border
                weight: 1,
                opacity: 1,
                fillOpacity: 0.8
            });
        }
        function styleBlueFeature(feature) {
            var color;
            switch (feature.properties.secondary) {
              case 'active':
                fillColor = '#00253b';
                break;
              case 'never materialized':
                fillColor = '#83d2ff';
                break;
              case 'plugged':
                fillColor = '#0287d4';
                break;
              case 'other':
                fillColor = '#025687';
                break;
              default:
                fillColor = '#000000';
            }
            return {
                fillColor: fillColor,
              // radius: 8,  // Size of the marker
              // fillOpacity: 0.6
            };
          }
        // Create a default popup as a placeholder for the well layers
        var popupu = L.popup().setContent("I am a standalone popup.");

        // Add the conventional wells to the map
        spinner_con.style.display = 'block';
        conurl = 'https://raw.githubusercontent.com/cullensmith/alleghenyleasemap/refs/heads/main/project_allegheny/static/json/wells_con.geojson'
        con = L.geoJSON.ajax(conurl, {
            pointToLayer: function (feature, latlng) {
                return createCircleMarker(latlng).setStyle(styleBlueFeature(feature));
            },
            onEachFeature: function (feature, layer) {
                layer.bindPopup("<strong>WELL INFORMATION</strong><br><br>Type: Conventional<br>Permit Num: "+feature.properties.permit_num+"<br>Well Name: "+feature.properties.well_name+"<br>Well Type: "+feature.properties.well_type+"<br>Well Status: "+feature.properties.well_status+"<br>Spud Date: "+feature.properties.spud_date+"<br>Plug Date: "+feature.properties.plug_date+"<br>Operator Num: "+feature.properties.operator_num+"<br>Operator: "+feature.properties.operatore);
            }
        }).addTo(map);
        spinner_con.style.display = 'none';
        conText.innerHTML = '';
        conText.appendChild(checkmarkc);


        function styleGreenFeature(feature) {
            var color;
            switch (feature.properties.secondary) {
              case 'active':
                fillColor = '#5d792f';
                break;
              case 'never materialized':
                fillColor = '#cee7a6';
                break;
              case 'plugged':
                fillColor = '#a3cf5f';
                break;
              case 'other':
                fillColor = '#7aa535';
                break;
              default:
                fillColor = '#ff0000';
            }
            return {
                fillColor: fillColor,
              // radius: 8,  // Size of the marker
              // fillOpacity: 0.6
            };
          }
        // Add the unconventional wells to the map
        spinner_unc.style.display = 'block';
        uncurl = 'https://raw.githubusercontent.com/cullensmith/alleghenyleasemap/refs/heads/main/project_allegheny/static/json/wells_unc.geojson'
        unc = L.geoJSON.ajax(uncurl, {
            pointToLayer: function (feature, latlng) {
                return createCircleMarker(latlng).setStyle(styleGreenFeature(feature));
            },
            onEachFeature: function (feature, layer) {
                layer.bindPopup("<strong>WELL INFORMATION</strong><br><br>Type: Unconventional<br>Permit Num: "+feature.properties.permit_num+"<br>Well Name: "+feature.properties.well_name+"<br>Well Type: "+feature.properties.well_type+"<br>Well Status: "+feature.properties.well_status+"<br>Spud Date: "+feature.properties.spud_date+"<br>Plug Date: "+feature.properties.plug_date+"<br>Operator Num: "+feature.properties.operator_num+"<br>Operator: "+feature.properties.operatore);
            }
        }).addTo(map);
        spinner_unc.style.display = 'none';
        uncText.innerHTML = '';
        uncText.appendChild(checkmarku);



        let filtvectorTileLayer = L.layerGroup().addTo(map) ;

        // Function to fetch GeoJSON data from a view
        function getFilteredGeoJSONData(startdate,enddate,a,c,md,sd,zs) {
            z = zs
            $.ajax({
                url: '/leasemap/filteredparcels', // Replace with your view URL
                method: 'GET',
                data: {
                    startdate: startdate,
                    enddate: enddate,
                    agmt: a,
                    company: c,
                    munis: md,
                    schools: sd,
                    zoning: z
                },
                success: function(data) {
                    // Convert GeoJSON to vector tiles using leaflet-geojson-vt
                    var filteredStyle = {
                        fillColor:"#0287D4",
                        color: "#025687",
                        weight: 1,
                        opacity: 1,
                        fillOpacity: 0.5,
                      };
                    
                    var options = {
                        maxZoom: 20,
                        tolerance: 3,
                        debug: 0,
                        style: filteredStyle
                    }; 

                    // Fetch the GeoJSON data from GitHub
                    fetch(parcelGeojsonData)
                        .then(response => response.json())
                        .then(filtgeojsonData => {
                        // Filter the GeoJSON data based on the selected categories
                        var filteredGeojsonData = {
                            type: 'FeatureCollection',
                            features: filtgeojsonData.features.filter(function(feature) {
                            return data.includes(feature.properties.pin);
                            })
                        };

                        // Add the filtered GeoJSON data to the map
                        filtvectorTileLayer = L.geoJSON(filteredGeojsonData, { 
                            style: filteredStyle,
                            onEachFeature: function (feature, layer) {
                                layer.on('click', function() {
                                    getMatches(feature.properties.pin);
                                    showSelection(feature)
                                    });
                            }
                        }).addTo(map); 
                    })
                    .catch(error => {
                        console.error('Error fetching GeoJSON data:', error);
                    });
                    
                    
                    document.getElementById('applyButton').innerHTML = 'Almost Done...'

 
                    setTimeout(function() {
                        document.body.style.cursor = "default";
                        document.getElementById('applyButton').innerHTML = 'Apply Selection'
                    }, 1000);

                },
                error: function(xhr, status, error) {
                    // Handle error
                    console.error(error);
                    document.getElementById('applyButton').innerHTML = 'Apply Selection'

                }
            });

        }
        // Function to filter features by a list of categories
        function filterCategories(categories) {
            // Clear existing layer (optional)
            vectorTileLayer.clearLayers();
            
            // Add the filtered features back to the map
            vectorTileLayer.addData(geojsonData.features.filter(function(feature) {
                return categories.includes(feature.properties.category);
            }));
        }

        var geojsonLayer_sel;

        function showSelection(s) {
            clearDetails();
          
            var geojsonStyle_s = {
                fillColor:"#fffb01",
                color: "#fffb01",
                weight: 4,
                opacity: 1,
                fillOpacity: 0.25,
              };
            
            var options_s = {
                maxZoom: 20,
                tolerance: 3,
                debug: 0,
                style: geojsonStyle_s
            }; 

            if (geojsonLayer_sel === undefined) {
                geojsonLayer_sel = L.geoJSON(s, { 
                    style: geojsonStyle_s,
                }).addTo(map);
            }
            else {
                map.removeLayer(geojsonLayer_sel);
                geojsonLayer_sel = L.geoJSON(s, { 
                    style: geojsonStyle_s,
                }).addTo(map);
            } ;
        };

        // Function to fetch GeoJSON data from a view
        function getMatches(p) {
            $.ajax({
                url: '/leasemap/get_matches', // Replace with your view URL
                method: 'GET',
                data: {
                    pin: p
                },
                success: function(data) {
                    document.getElementById('clear_sel').style.display = 'inline';
                    document.getElementById("parcelid").innerText = data.features[0]['pin'];
                    document.getElementById("bvp").innerText = data.features[0]['bk_vol_pg'];
                    document.getElementById("muni").innerText = data.features[0]['munidesc']; 
                    document.getElementById("schdist").innerText = data.features[0]['schooldesc']; 
                    document.getElementById("zone").innerText = data.features[0]['classdesc']; 
                    document.getElementById("land_use").innerText = data.features[0]['usedesc']; 
                    document.getElementById("acreage").innerText = data.features[0]['calcacreag']; 
                    document.getElementById("market_value").innerText = '$'+data.features[0]['fairmarkettotal']; 
                    changeToLink(data.features[0]['pin'])
                    displayData(data);
                },
                error: function(xhr, status, error) {
                    // Handle error
                    console.error(error);
                }
            });
        }

        function clearDetails() {
            document.getElementById('parcelid').innerText = '----------'
            document.getElementById('bvp').innerText = '----------'
            document.getElementById('muni').innerText = '----------'
            document.getElementById('schdist').innerText = '----------'
            document.getElementById('zone').innerText = '----------'
            document.getElementById('land_use').innerText = '----------'
            document.getElementById('acreage').innerText = '----------'
            document.getElementById('market_value').innerText = '----------'
            document.getElementById('dataContainer').innerHTML = ''; // History
            document.getElementById('ownership').innerHTML = '<p>----------</p>';
        };

        function changeToLink(pid) {
            // Get the div with the id 'ownership'
            var div = document.getElementById('ownership');
            var link = document.createElement('a');
            link.href = 'https://realestate.alleghenycounty.us/OwnerHistory?ID='+pid+'&SearchType=3&CurrRow=0&SearchName=&SearchStreet=&SearchNum=&SearchMuni=&SearchParcel='+pid+'&pin='+pid;
            link.textContent = 'See Current Ownership';
            link.target = '_blank'; 
            div.innerHTML = ''; // Clear the current content of the div
            div.appendChild(link); // Add the link inside the div
            }

        function displayData(data) {
            const container = document.getElementById('dataContainer');
            container.innerHTML = '';
            data.features.forEach(feature => {
                const p = document.createElement('p');
                p.innerHTML = `
                    <strong>    </strong> <a href="${feature.dv_url}" target="_blank" style="color: black; text-decoration: underline;">${feature.file_date}</a><p> - ${feature.agmt_type}</p>
                `;
                container.appendChild(p);
            });
        }

        function openlegend() {
            if (document.getElementById('map-legend').style.display === 'none') {
                document.getElementById('map-legend').style.display = 'inline';
            } else {
            document.getElementById('map-legend').style.display = 'none';
            }
        };

        function opensplash() {
            document.getElementById('btn-splashh').checked = false;
            document.getElementById('splashScreen').style.opacity = 1;
            document.getElementById('splashScreen').style.display = 'flex';
        };

        function sendhome() {
            window.open('https://www.fractracker.org/resources/lease-mapping/', '_blank');
        };


        // function to filter the points based on legend checkboxes 
        var newcon;
        var newunc;

        function toggleallcons() {
            var anyChecked = false;
            cbarray = [
                document.getElementById('layer_cwa'),
                document.getElementById('layer_cwp'),
                document.getElementById('layer_cwo'),
                document.getElementById('layer_cwn'),
                document.getElementById('layer_cwah'),
                document.getElementById('layer_cwph'),
                document.getElementById('layer_cwoh'),
                document.getElementById('layer_cwnh')
                ]
            // Check if any checkbox is checked
            cbarray.forEach(function(checkbox) {
                if (checkbox.checked) {
                    anyChecked = true;
                }
            });
            
            // If any checkbox is checked, uncheck all
            if (anyChecked) {
                cbarray.forEach(function(checkbox) {
                    checkbox.checked = false;
                    if (con) {
                        map.removeLayer(con);  // Clear existing layers
                    }  
                    if (newcon) {
                        map.removeLayer(newcon);  // Clear existing layers
                    }  
                });
            } else {
                // If all are unchecked, check all
                cbarray.forEach(function(checkbox) {
                    checkbox.checked = true;
                    if (con) {
                        con.addTo(map);  // Clear existing layers
                    }
                });
            }
        };

        function togglealluncs() {
            var anyChecked = false;
            cbarray = [
                document.getElementById('layer_uwa'),
                document.getElementById('layer_uwp'),
                document.getElementById('layer_uwo'),
                document.getElementById('layer_uwn'),
                document.getElementById('layer_uwah'),
                document.getElementById('layer_uwph'),
                document.getElementById('layer_uwoh'),
                document.getElementById('layer_uwnh')
                ]
            // Check if any checkbox is checked
            cbarray.forEach(function(checkbox) {
                if (checkbox.checked) {
                    anyChecked = true;
                }
            });
            
            // If any checkbox is checked, uncheck all
            if (anyChecked) {
                cbarray.forEach(function(checkbox) {
                    checkbox.checked = false;
                    if (unc) {
                        map.removeLayer(unc);  // Clear existing layers
                    }  
                    if (newunc) {
                        map.removeLayer(newunc);  // Clear existing layers
                    }  
                });
            } else {
                // If all are unchecked, check all
                cbarray.forEach(function(checkbox) {
                    checkbox.checked = true;
                    if (unc) {
                        unc.addTo(map);  // Clear existing layers
                    }
                });
            }
        };


        // Function to update the map based on selected categories
        function updateMapPointsh() {
            if (con) {
                map.removeLayer(con);  // Clear existing layers
            }  
            if (newcon) {
                map.removeLayer(newcon);  // Clear existing layers
            }    
            // Get selected categories from checkboxes
            var selectedCategoriescon = [];
            if (document.getElementById('layer_cwah').checked) selectedCategoriescon.push('active');
            if (document.getElementById('layer_cwph').checked) selectedCategoriescon.push('plugged');
            if (document.getElementById('layer_cwoh').checked) selectedCategoriescon.push('other');
            if (document.getElementById('layer_cwnh').checked) selectedCategoriescon.push('never materialized');
            // Filter GeoJSON data based on selected categories
            var filteredDataCon = {
                type: 'FeatureCollection',
                features: con.getLayers().filter(function (layer) {
                    // Example filter: check the properties of the feature (if they exist)
                    return selectedCategoriescon.includes(layer.feature.properties.secondary);
                }).map(function (layer) {
                    // Manually create a GeoJSON feature for each filtered layer
                    var geojsonFeature = {
                        type: 'Feature',
                        geometry: {
                            type: 'Point',  // Assuming all layers are points (markers)
                            coordinates: layer.getLatLng() ? [layer.getLatLng().lng, layer.getLatLng().lat] : [] // Get the lat/lng from the marker
                        },
                        properties: layer.feature ? layer.feature.properties : {} // Use the properties of the original feature
                    };

                    return geojsonFeature;
                })
            };

            // Add filtered GeoJSON data to the map
            newcon = L.geoJSON(filteredDataCon, {
                pointToLayer: function (feature, latlng) {
                    return createCircleMarker(latlng).setStyle(styleBlueFeature(feature));
                }
            }).addTo(map);

            if (unc) {
                map.removeLayer(unc);  // Clear existing layers
            }  
            if (newunc) {
                map.removeLayer(newunc);  // Clear existing layers
            }    
            // Get selected categories from checkboxes
            var selectedCategoriesunc = [];
            if (document.getElementById('layer_uwah').checked) selectedCategoriesunc.push('active');
            if (document.getElementById('layer_uwph').checked) selectedCategoriesunc.push('plugged');
            if (document.getElementById('layer_uwoh').checked) selectedCategoriesunc.push('other');
            if (document.getElementById('layer_uwnh').checked) selectedCategoriesunc.push('never materialized');
            // Filter GeoJSON data based on selected categories
            var filteredDataUnc = {
                type: 'FeatureCollection',
                features: unc.getLayers().filter(function (layer) {
                    // Example filter: check the properties of the feature (if they exist)
                    return selectedCategoriesunc.includes(layer.feature.properties.secondary);
                }).map(function (layer) {
                    // Manually create a GeoJSON feature for each filtered layer
                    var geojsonFeatureu = {
                        type: 'Feature',
                        geometry: {
                            type: 'Point',  // Assuming all layers are points (markers)
                            coordinates: layer.getLatLng() ? [layer.getLatLng().lng, layer.getLatLng().lat] : [] // Get the lat/lng from the marker
                        },
                        properties: layer.feature ? layer.feature.properties : {} // Use the properties of the original feature
                    };

                    return geojsonFeatureu;
                })
            };

            // Add filtered GeoJSON data to the map
            newunc = L.geoJSON(filteredDataUnc, {
                pointToLayer: function (feature, latlng) {
                    return createCircleMarker(latlng).setStyle(styleGreenFeature(feature));
                }
            }).addTo(map);
            
        }


        // Attach event listeners to checkboxes to update map when changed
        document.querySelectorAll('#ddbtns input').forEach(function (checkbox) {
            checkbox.addEventListener('change', updateMapPointsh);
        });


        // legend section below


        // Function to update the map based on selected categories
        function updateMapPoints() {
            if (con) {
                map.removeLayer(con);  // Clear existing layers
            }  
            if (newcon) {
                map.removeLayer(newcon);  // Clear existing layers
            }    
            // Get selected categories from checkboxes
            var selectedCategoriescon = [];
            if (document.getElementById('layer_cwa').checked) selectedCategoriescon.push('active');
            if (document.getElementById('layer_cwp').checked) selectedCategoriescon.push('plugged');
            if (document.getElementById('layer_cwo').checked) selectedCategoriescon.push('other');
            if (document.getElementById('layer_cwn').checked) selectedCategoriescon.push('never materialized');
            // Filter GeoJSON data based on selected categories
            var filteredDataCon = {
                type: 'FeatureCollection',
                features: con.getLayers().filter(function (layer) {
                    // Example filter: check the properties of the feature (if they exist)
                    return selectedCategoriescon.includes(layer.feature.properties.secondary);
                }).map(function (layer) {
                    // Manually create a GeoJSON feature for each filtered layer
                    var geojsonFeature = {
                        type: 'Feature',
                        geometry: {
                            type: 'Point',  // Assuming all layers are points (markers)
                            coordinates: layer.getLatLng() ? [layer.getLatLng().lng, layer.getLatLng().lat] : [] // Get the lat/lng from the marker
                        },
                        properties: layer.feature ? layer.feature.properties : {} // Use the properties of the original feature
                    };

                    return geojsonFeature;
                })
            };

            // Add filtered GeoJSON data to the map
            newcon = L.geoJSON(filteredDataCon, {
                pointToLayer: function (feature, latlng) {
                    return createCircleMarker(latlng).setStyle(styleBlueFeature(feature));
                }
            }).addTo(map);

            if (unc) {
                map.removeLayer(unc);  // Clear existing layers
            }  
            if (newunc) {
                map.removeLayer(newunc);  // Clear existing layers
            }    
            // Get selected categories from checkboxes
            var selectedCategoriesunc = [];
            if (document.getElementById('layer_uwa').checked) selectedCategoriesunc.push('active');
            if (document.getElementById('layer_uwp').checked) selectedCategoriesunc.push('plugged');
            if (document.getElementById('layer_uwo').checked) selectedCategoriesunc.push('other');
            if (document.getElementById('layer_uwn').checked) selectedCategoriesunc.push('never materialized');
            // Filter GeoJSON data based on selected categories
            var filteredDataUnc = {
                type: 'FeatureCollection',
                features: unc.getLayers().filter(function (layer) {
                    // Example filter: check the properties of the feature (if they exist)
                    return selectedCategoriesunc.includes(layer.feature.properties.secondary);
                }).map(function (layer) {
                    // Manually create a GeoJSON feature for each filtered layer
                    var geojsonFeatureu = {
                        type: 'Feature',
                        geometry: {
                            type: 'Point',  // Assuming all layers are points (markers)
                            coordinates: layer.getLatLng() ? [layer.getLatLng().lng, layer.getLatLng().lat] : [] // Get the lat/lng from the marker
                        },
                        properties: layer.feature ? layer.feature.properties : {} // Use the properties of the original feature
                    };

                    return geojsonFeatureu;
                })
            };

            // Add filtered GeoJSON data to the map
            newunc = L.geoJSON(filteredDataUnc, {
                pointToLayer: function (feature, latlng) {
                    return createCircleMarker(latlng).setStyle(styleGreenFeature(feature));
                }
            }).addTo(map);
            
        }
        // Attach event listeners to checkboxes to update map when changed
        document.querySelectorAll('#map-legend input').forEach(function (checkbox) {
            checkbox.addEventListener('change', updateMapPoints);
        });

        document.getElementById('layer_uwa').addEventListener('change',matchothera)
        function matchothera() {
            if (document.getElementById('layer_uwa').checked) {
                document.getElementById('layer_uwah').checked = true
            } else {
                document.getElementById('layer_uwah').checked = false
            }
        }
        document.getElementById('layer_uwah').addEventListener('change',matchotherah)
        function matchotherah() {
            if (document.getElementById('layer_uwah').checked) {
                document.getElementById('layer_uwa').checked = true
            } else {
                document.getElementById('layer_uwa').checked = false
            }
        }
        document.getElementById('layer_uwp').addEventListener('change',matchotherp)
        function matchotherp() {
            if (document.getElementById('layer_uwp').checked) {
                document.getElementById('layer_uwph').checked = true
            } else {
                document.getElementById('layer_uwph').checked = false
            }
        }
        document.getElementById('layer_uwph').addEventListener('change',matchotherph)
        function matchotherph() {
            if (document.getElementById('layer_uwph').checked) {
                document.getElementById('layer_uwp').checked = true
            } else {
                document.getElementById('layer_uwp').checked = false
            }
        }
        document.getElementById('layer_uwo').addEventListener('change',matchothero)
        function matchothero() {
            if (document.getElementById('layer_uwo').checked) {
                document.getElementById('layer_uwoh').checked = true
            } else {
                document.getElementById('layer_uwoh').checked = false
            }
        }
        document.getElementById('layer_uwoh').addEventListener('change',matchotheroh)
        function matchotheroh() {
            if (document.getElementById('layer_uwoh').checked) {
                document.getElementById('layer_uwo').checked = true
            } else {
                document.getElementById('layer_uwo').checked = false
            }
        }
        document.getElementById('layer_uwn').addEventListener('change',matchothern)
        function matchothern() {
            if (document.getElementById('layer_uwn').checked) {
                document.getElementById('layer_uwnh').checked = true
            } else {
                document.getElementById('layer_uwnh').checked = false
            }
        }
        document.getElementById('layer_uwnh').addEventListener('change',matchothernh)
        function matchothernh() {
            if (document.getElementById('layer_uwnh').checked) {
                document.getElementById('layer_uwn').checked = true
            } else {
                document.getElementById('layer_uwn').checked = false
            }
        } 


        // cons below

        document.getElementById('layer_cwa').addEventListener('change',matchotherca)
        function matchotherca() {
            if (document.getElementById('layer_cwa').checked) {
                document.getElementById('layer_cwah').checked = true
            } else {
                console.log('uncheckit')
                document.getElementById('layer_cwah').checked = false
            }
        }
        document.getElementById('layer_cwah').addEventListener('change',matchothercah)
        function matchothercah() {
            if (document.getElementById('layer_cwah').checked) {
                document.getElementById('layer_cwa').checked = true
            } else {
                console.log('uncheckit')
                document.getElementById('layer_cwa').checked = false
            }
        }
        document.getElementById('layer_cwp').addEventListener('change',matchothecrp)
        function matchothecrp() {
            if (document.getElementById('layer_cwp').checked) {
                document.getElementById('layer_cwph').checked = true
            } else {
                console.log('uncheckit')
                document.getElementById('layer_cwph').checked = false
            }
        }
        document.getElementById('layer_cwph').addEventListener('change',matchothercph)
        function matchothercph() {
            if (document.getElementById('layer_cwph').checked) {
                document.getElementById('layer_cwp').checked = true
            } else {
                console.log('uncheckit')
                document.getElementById('layer_cwp').checked = false
            }
        }
        document.getElementById('layer_cwo').addEventListener('change',matchothecro)
        function matchothecro() {
            if (document.getElementById('layer_cwo').checked) {
                document.getElementById('layer_cwoh').checked = true
            } else {
                console.log('uncheckit')
                document.getElementById('layer_cwoh').checked = false
            }
        }
        document.getElementById('layer_cwoh').addEventListener('change',matchothercoh)
        function matchothercoh() {
            if (document.getElementById('layer_cwoh').checked) {
                document.getElementById('layer_cwo').checked = true
            } else {
                console.log('uncheckit')
                document.getElementById('layer_cwo').checked = false
            }
        }
        document.getElementById('layer_cwn').addEventListener('change',matchothecrn)
        function matchothecrn() {
            if (document.getElementById('layer_cwn').checked) {
                document.getElementById('layer_cwnh').checked = true
            } else {
                console.log('uncheckit')
                document.getElementById('layer_cwnh').checked = false
            }
        }
        document.getElementById('layer_cwnh').addEventListener('change',matchothercnh)
        function matchothercnh() {
            if (document.getElementById('layer_cwnh').checked) {
                document.getElementById('layer_cwn').checked = true
            } else {
                console.log('uncheckit')
                document.getElementById('layer_cwn').checked = false
            }
        } 




        // Function to handle checkbox change events for layer2 (polygon)
        document.getElementById('layer2').addEventListener('change', function() {
            if (this.checked) {
                // If checked, call the function to get and update the polygon layer
                filtvectorTileLayer.addTo(map);
                //if (document.getElementById('layer1').checked) {
                document.getElementById('layer2c').checked = true;
                //    map.removeLayer(unc);
                //    unc.addTo(map);
                //}
                //if (document.getElementById('layer0').checked) {
                //    map.removeLayer(con);
                //    con.addTo(map);
                //}
            } else {
                // If unchecked, remove the polygon layer from the map using the canvasLayer variable
                if (filtvectorTileLayer) {
                    document.getElementById('layer2c').checked = false;
                    map.removeLayer(filtvectorTileLayer);
                }
            }
        });
        // Function to handle checkbox change events for layer2 (polygon)
        document.getElementById('layer2c').addEventListener('change', function() {
            if (this.checked) {
                // If checked, call the function to get and update the polygon layer
                filtvectorTileLayer.addTo(map);
                //if (document.getElementById('layer1').checked) {
                document.getElementById('layer2').checked = true;
                //    map.removeLayer(unc);
                //    unc.addTo(map);
                //}
                //if (document.getElementById('layer0').checked) {
                //    map.removeLayer(con);
                //    con.addTo(map);
                //}
            } else {
                // If unchecked, remove the polygon layer from the map using the canvasLayer variable
                if (filtvectorTileLayer) {
                    document.getElementById('layer2').checked = false;
                    map.removeLayer(filtvectorTileLayer);
                }
            }
        });
        // Function to handle checkbox change events for layer2 (polygon)
        document.getElementById('layer3').addEventListener('change', function() {
            if (this.checked) {
                // If checked, call the function to get and update the polygon layer
                vectorTileLayer.addTo(map);
                //if (document.getElementById('layer1').checked) {
                document.getElementById('layer3c').checked = true;
                //    map.removeLayer(unc);
                //    unc.addTo(map);
                //}
                //if (document.getElementById('layer0').checked) {
                //    map.removeLayer(con);
                //    con.addTo(map);
                //}
                if (document.getElementById('layer2').checked && map.hasLayer(filtvectorTileLayer)) {
                    map.removeLayer(filtvectorTileLayer);
                    filtvectorTileLayer.addTo(map);
                    //if (document.getElementById('layer1').checked) {
                    //    map.removeLayer(unc);
                    //    unc.addTo(map);
                    //}
                    //if (document.getElementById('layer0').checked) {
                    //    map.removeLayer(con);
                    //    con.addTo(map);
                    //} 
                }
            } else {
                // If unchecked, remove the polygon layer from the map using the canvasLayer variable
                if (vectorTileLayer) {
                    document.getElementById('layer3c').checked = false;

                    map.removeLayer(vectorTileLayer);
                }
            }
        });
        // Function to handle checkbox change events for layer2 (polygon)
        document.getElementById('layer3c').addEventListener('change', function() {
            if (this.checked) {
                // If checked, call the function to get and update the polygon layer
                vectorTileLayer.addTo(map);
                // come back and fix
                //if (document.getElementById('layer1').checked) {
                document.getElementById('layer3').checked = true;
                //    map.removeLayer(unc);
                //    unc.addTo(map);
                //}
                //if (document.getElementById('layer0').checked) {
                //    map.removeLayer(con);
                //    con.addTo(map);
                //}
                if (document.getElementById('layer2').checked && map.hasLayer(filtvectorTileLayer)) {
                    map.removeLayer(filtvectorTileLayer);
                    filtvectorTileLayer.addTo(map);
                    //if (document.getElementById('layer1').checked) {
                    //    map.removeLayer(unc);
                    //    unc.addTo(map);
                    //}
                    //if (document.getElementById('layer0').checked) {
                    //    map.removeLayer(con);
                    //    con.addTo(map);
                    //} 
                }
            } else {
                // If unchecked, remove the polygon layer from the map using the canvasLayer variable
                if (vectorTileLayer) {
                    document.getElementById('layer3').checked = false;

                    map.removeLayer(vectorTileLayer);
                }
            }
        });
        document.getElementById('clear_sel').addEventListener('click', function() {
            document.getElementById('clear_sel').style.display = 'none';
            map.removeLayer(geojsonLayer_sel);
            clearDetails();
        });


        function showdate() {
            console.log(document.getElementById('to-date').value);
        };


        document.getElementById('applyButton').addEventListener('click', function() {
            document.body.style.cursor = "wait";
            document.getElementById('applyButton').innerHTML = 'Please Wait...'
                    // Function to uncheck all checkboxes in a filter group
            document.getElementById('layer3').checked = false;
            if (map.hasLayer(filtvectorTileLayer)) {
                map.removeLayer(filtvectorTileLayer);
            }
            map.removeLayer(vectorTileLayer);

            var startdate = document.getElementById('from-date').value;
            var enddate = document.getElementById('to-date').value;

            console.log('start date:');
            console.log(startdate)
            console.log('to date:');
            console.log(enddate)
            // Get the checkbox element
            a=''
            for (let cba = 0; cba <= 62; cba++) {
                abox = document.getElementById('agmt'+cba);
                if (abox.checked) {
                    a += ','
                    a += abox.value
                    };
            };
            c=''
            nc=''
            for (let cbc = 0; cbc <= 42; cbc++) {
                cbox = document.getElementById('company'+cbc);
                if (cbox.checked) {
                    c += ','
                    c += cbox.value
                    }
                else {
                    nc += cbox.value
                }
            };
            md = ''
            for (let cbm = 0; cbm <= 154; cbm++) {
                mbox = document.getElementById('muni'+cbm);
                if (mbox.checked) {
                    md += ','
                    md += mbox.value
                    };
            };
            sd = ''
            for (let cbs = 0; cbs <= 45; cbs++) {
                sbox = document.getElementById('schooldistrict'+cbs);
                if (sbox.checked) {
                    sd += ','
                    sd += sbox.value
                    };
            };
            zs = ''
            for (let cbz = 0; cbz <= 6; cbz++) {
                zbox = document.getElementById('zoning'+cbz);
                if (zbox.checked) {
                    zs += ','
                    zs += zbox.value
                    };
            };
            
            getFilteredGeoJSONData(startdate,enddate,a,c,md,sd,zs);
            document.getElementById('layer2').checked = true;
            document.getElementById('layer2c').checked = true;
            document.getElementById('layer3').checked = false;
            document.getElementById('layer3c').checked = false;

        });

        document.getElementById('resetButton').addEventListener('click', function() {
            var checkboxes = document.querySelectorAll('.companyblocks input[type="checkbox"]');
            checkboxes.forEach(function(checkbox) {
                checkbox.checked = true;
            });
            var checkboxes = document.querySelectorAll('.recordtype-content input[type="checkbox"]');
            checkboxes.forEach(function(checkbox) {
                checkbox.checked = true;
            });
            var checkboxes = document.querySelectorAll('.zoning-content input[type="checkbox"]');
            checkboxes.forEach(function(checkbox) {
                checkbox.checked = true;
            });
            var checkboxes = document.querySelectorAll('.schooldistrict-content input[type="checkbox"]');
            checkboxes.forEach(function(checkbox) {
                checkbox.checked = true;
            });
            var checkboxes = document.querySelectorAll('.municipality-content input[type="checkbox"]');
            checkboxes.forEach(function(checkbox) {
                checkbox.checked = true;
            });
        });

        // Function to delay adding the point layer until the page has fully loaded
        window.addEventListener('load', function() {
            // Add the point layer after the page is fully loaded
            // add the layers to the map
            setTimeout(function() {
                map.removeLayer(unc);
                map.removeLayer(con);
                unc.addTo(map);
                con.addTo(map);
            }, 1500);
        });


        function removeSplash() {
            // Fade out the splash screen
            document.getElementById('splashScreen').style.opacity = '0';
            
            // After the splash screen fades out, hide it and show the main content
            setTimeout(function() {
                document.getElementById('splashScreen').style.display = 'none';
                document.getElementById('mainContent').style.display = 'block';
            }, 500); // Wait for the fade-out effect to complete
        }
    </script>
</body>
</html>